
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{a9 as e,aw as a,ax as t,d as l,W as s,t as n,u as o,r,y as i,aD as u,az as c,b,f as d,n as v,i as p,k as m,_ as f,bD as y,O as g,b1 as h,bE as T,bF as x,c as N,o as $,a$ as w,h as k,E as P,bG as B,ar as C,b4 as E,al as S,as as R,b5 as F,H as A,bH as _,g as K,bC as L,aB as j,aN as q,aQ as z,bI as G,G as H,K as O,L as V,m as D,q as M,aG as U}from"./index.252503d3.js";import{U as W}from"./event.d298a7ab.js";const I=Symbol("tabsRootContextKey");var Q=f(l({name:"ElTabBar",props:e({tabs:{type:a(Array),default:()=>t([])}}),setup(e,{expose:a}){const t=e,l=g(),f=s(I);f||n("ElTabBar","<el-tabs><el-tab-bar /></el-tabs>");const h=o("tabs"),T=r(),x=r(),N=()=>x.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(f.props.tabPosition)?"width":"height",n="width"===s?"x":"y";return t.tabs.every((o=>{var r,i,u,c;const b=null==(i=null==(r=l.parent)?void 0:r.refs)?void 0:i[`tab-${o.paneName}`];if(!b)return!1;if(!o.active)return!0;a=b[`client${y(s)}`];const d="x"===n?"left":"top";e=b.getBoundingClientRect()[d]-(null!=(c=null==(u=b.parentElement)?void 0:u.getBoundingClientRect()[d])?c:0);const v=window.getComputedStyle(b);return"width"===s&&(t.tabs.length>1&&(a-=Number.parseFloat(v.paddingLeft)+Number.parseFloat(v.paddingRight)),e+=Number.parseFloat(v.paddingLeft)),!1})),{[s]:`${a}px`,transform:`translate${y(n)}(${e}px)`}})();return i((()=>t.tabs),(async()=>{await u(),N()}),{immediate:!0}),c(T,(()=>N())),a({ref:T,update:N}),(e,a)=>(b(),d("div",{ref_key:"barRef",ref:T,class:v([p(h).e("active-bar"),p(h).is(p(f).props.tabPosition)]),style:m(x.value)},null,6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const X=e({panes:{type:a(Array),default:()=>t([])},currentName:{type:[String,Number],default:""},editable:Boolean,onTabClick:{type:a(Function),default:h},onTabRemove:{type:a(Function),default:h},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Y=l({name:"ElTabNav",props:X,setup(e,{expose:a}){const t=g(),l=s(I);l||n("ElTabNav","<el-tabs><tab-nav /></el-tabs>");const b=o("tabs"),d=T(),v=x(),p=r(),m=r(),f=r(),h=r(!1),R=r(0),F=r(!1),A=r(!0),_=N((()=>["top","bottom"].includes(l.props.tabPosition)?"width":"height")),K=N((()=>({transform:`translate${"width"===_.value?"X":"Y"}(-${R.value}px)`}))),L=()=>{if(!p.value)return;const e=p.value[`offset${y(_.value)}`],a=R.value;if(!a)return;const t=a>e?a-e:0;R.value=t},j=()=>{if(!p.value||!m.value)return;const e=m.value[`offset${y(_.value)}`],a=p.value[`offset${y(_.value)}`],t=R.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;R.value=l},q=async()=>{const e=m.value;if(!(h.value&&f.value&&p.value&&e))return;await u();const a=f.value.querySelector(".is-active");if(!a)return;const t=p.value,s=["top","bottom"].includes(l.props.tabPosition),n=a.getBoundingClientRect(),o=t.getBoundingClientRect(),r=s?e.offsetWidth-o.width:e.offsetHeight-o.height,i=R.value;let c=i;s?(n.left<o.left&&(c=i-(o.left-n.left)),n.right>o.right&&(c=i+n.right-o.right)):(n.top<o.top&&(c=i-(o.top-n.top)),n.bottom>o.bottom&&(c=i+(n.bottom-o.bottom))),c=Math.max(c,0),R.value=Math.min(c,r)},z=()=>{if(!m.value||!p.value)return;const e=m.value[`offset${y(_.value)}`],a=p.value[`offset${y(_.value)}`],t=R.value;if(a<e){const t=R.value;h.value=h.value||{},h.value.prev=t,h.value.next=t+a<e,e-t<a&&(R.value=e-a)}else h.value=!1,t>0&&(R.value=0)},G=e=>{const a=e.code,{up:t,down:l,left:s,right:n}=S;if(![t,l,s,n].includes(a))return;const o=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),r=o.indexOf(e.target);let i;i=a===s||a===t?0===r?o.length-1:r-1:r<o.length-1?r+1:0,o[i].focus(),o[i].click(),H()},H=()=>{A.value&&(F.value=!0)},O=()=>F.value=!1;return i(d,(e=>{"hidden"===e?A.value=!1:"visible"===e&&setTimeout((()=>A.value=!0),50)})),i(v,(e=>{e?setTimeout((()=>A.value=!0),50):A.value=!1})),c(f,z),$((()=>setTimeout((()=>q()),0))),w((()=>z())),a({scrollToActiveTab:q,removeFocus:O}),i((()=>e.panes),(()=>t.update()),{flush:"post"}),()=>{const a=h.value?[k("span",{class:[b.e("nav-prev"),b.is("disabled",!h.value.prev)],onClick:L},[k(P,null,{default:()=>[k(B,null,null)]})]),k("span",{class:[b.e("nav-next"),b.is("disabled",!h.value.next)],onClick:j},[k(P,null,{default:()=>[k(C,null,null)]})])]:null,t=e.panes.map(((a,t)=>{var s,n,o,r;const i=a.props.disabled,u=null!=(n=null!=(s=a.props.name)?s:a.index)?n:`${t}`,c=!i&&(a.isClosable||e.editable);a.index=`${t}`;const d=c?k(P,{class:"is-icon-close",onClick:t=>e.onTabRemove(a,t)},{default:()=>[k(E,null,null)]}):null,v=(null==(r=(o=a.slots).label)?void 0:r.call(o))||a.props.label,p=!i&&a.active?0:-1;return k("div",{ref:`tab-${u}`,class:[b.e("item"),b.is(l.props.tabPosition),b.is("active",a.active),b.is("disabled",i),b.is("closable",c),b.is("focus",F.value)],id:`tab-${u}`,key:`tab-${u}`,"aria-controls":`pane-${u}`,role:"tab","aria-selected":a.active,tabindex:p,onFocus:()=>H(),onBlur:()=>O(),onClick:t=>{O(),e.onTabClick(a,u,t)},onKeydown:t=>{!c||t.code!==S.delete&&t.code!==S.backspace||e.onTabRemove(a,t)}},[v,d])}));return k("div",{ref:f,class:[b.e("nav-wrap"),b.is("scrollable",!!h.value),b.is(l.props.tabPosition)]},[a,k("div",{class:b.e("nav-scroll"),ref:p},[k("div",{class:[b.e("nav"),b.is(l.props.tabPosition),b.is("stretch",e.stretch&&["top","bottom"].includes(l.props.tabPosition))],ref:m,style:K.value,role:"tablist",onKeydown:G},[e.type?null:k(Q,{tabs:[...e.panes]},null),t])])])}}}),J=e({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:a(Function),default:()=>!0},stretch:Boolean}),Z=e=>j(e)||q(e);var ee=l({name:"ElTabs",props:J,emits:{[W]:e=>Z(e),"tab-click":(e,a)=>a instanceof Event,"tab-change":e=>Z(e),edit:(e,a)=>["remove","add"].includes(a),"tab-remove":e=>Z(e),"tab-add":()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s,n;const c=o("tabs"),b=r(),d=R({}),v=r(null!=(n=null!=(s=e.modelValue)?s:e.activeName)?n:"0"),p=async t=>{var l,s,n;if(v.value!==t&&!L(t))try{!1!==await(null==(l=e.beforeLeave)?void 0:l.call(e,t,v.value))&&((e=>{v.value=e,a(W,e),a("tab-change",e)})(t),null==(n=null==(s=b.value)?void 0:s.removeFocus)||n.call(s))}catch(o){}},m=(e,t,l)=>{e.props.disabled||(p(t),a("tab-click",e,l))},f=(e,t)=>{e.props.disabled||L(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tab-remove",e.props.name))},y=()=>{a("edit",void 0,"add"),a("tab-add")};F({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},N((()=>!!e.activeName))),i((()=>e.activeName),(e=>p(e))),i((()=>e.modelValue),(e=>p(e))),i(v,(async()=>{var e;await u(),null==(e=b.value)||e.scrollToActiveTab()}));A(I,{props:e,currentName:v,registerPane:e=>d[e.uid]=e,unregisterPane:e=>delete d[e]});return l({currentName:v}),()=>{const a=e.editable||e.addable?k("span",{class:c.e("new-tab"),tabindex:"0",onClick:y,onKeydown:e=>{e.code===S.enter&&y()}},[k(P,{class:c.is("icon-plus")},{default:()=>[k(_,null,null)]})]):null,l=k("div",{class:[c.e("header"),c.is(e.tabPosition)]},[a,k(Y,{ref:b,currentName:v.value,editable:e.editable,type:e.type,panes:Object.values(d),stretch:e.stretch,onTabClick:m,onTabRemove:f},null)]),s=k("div",{class:c.e("content")},[K(t,"default")]);return k("div",{class:[c.b(),c.m(e.tabPosition),{[c.m("card")]:"card"===e.type,[c.m("border-card")]:"border-card"===e.type}]},[..."bottom"!==e.tabPosition?[l,s]:[s,l]])}}});const ae=e({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),te=["id","aria-hidden","aria-labelledby"];var le=f(l({name:"ElTabPane",props:ae,setup(e){const a=e,t=g(),l=z(),u=s(I);u||n("ElTabPane","usage: <el-tabs><el-tab-pane /></el-tabs/>");const c=o("tab-pane"),m=r(),f=N((()=>a.closable||u.props.closable)),y=G((()=>{var e;return u.currentName.value===(null!=(e=a.name)?e:m.value)})),h=r(y.value),T=N((()=>{var e;return null!=(e=a.name)?e:m.value})),x=G((()=>!a.lazy||h.value||y.value));i(y,(e=>{e&&(h.value=!0)}));const w=R({uid:t.uid,slots:l,props:a,paneName:T,active:y,index:m,isClosable:f});return $((()=>{u.registerPane(w)})),H((()=>{u.unregisterPane(w.uid)})),(e,a)=>p(x)?O((b(),d("div",{key:0,id:`pane-${p(T)}`,class:v(p(c).b()),role:"tabpanel","aria-hidden":!p(y),"aria-labelledby":`tab-${p(T)}`},[K(e.$slots,"default")],10,te)),[[V,p(y)]]):D("v-if",!0)}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const se=M(ee,{TabPane:le}),ne=U(le);export{ne as E,se as a};
