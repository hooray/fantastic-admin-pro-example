
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{a8 as e,ay as a,b3 as t,ab as l,aD as s,aE as o,d as n,aT as u,aR as i,aX as r,u as p,r as c,c as d,cJ as v,c8 as g,c7 as f,o as m,b as h,e as y,w as b,G as A,h as $,i as w,f as k,E as x,n as S,bf as _,Z as M,g as F,Y as C,M as E,N as B,c9 as I,k as T,a2 as V,ae as K,X as R,l as U,a6 as W,_ as N,aF as L,bW as j,t as q,q as O,A as P,L as H,bP as z,bQ as D,m as X}from"./index.503ec71c.js";import{E as G}from"./el-input.546a1988.js";import{U as J,I as Q,C as Y}from"./event.d298a7ab.js";const Z=e({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:a(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:a([Function,Array]),default:t},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:l.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1}}),ee=["aria-expanded","aria-owns"],ae={key:0},te=["id","aria-selected","onClick"];const le=O(N(n({name:"ElAutocomplete",inheritAttrs:!1,props:Z,emits:{[J]:e=>s(e),[Q]:e=>s(e),[Y]:e=>s(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>o(e)},setup(e,{expose:a,emit:t}){const l=e,s=u(),o=i(),n=r(),N=p("autocomplete"),O=c(),P=c(),H=c(),z=c();let D=!1;const X=c([]),Z=c(-1),le=c(""),se=c(!1),oe=c(!1),ne=c(!1),ue=d((()=>N.b(String(v())))),ie=d((()=>o.style)),re=d((()=>(X.value.length>0||ne.value)&&se.value)),pe=d((()=>!l.hideLoading&&ne.value)),ce=d((()=>O.value?Array.from(O.value.$el.querySelectorAll("input")):[])),de=async()=>{await L(),re.value&&(le.value=`${O.value.$el.offsetWidth}px`)},ve=()=>{D=!0},ge=()=>{D=!1,Z.value=-1},fe=g((async e=>{if(oe.value)return;const a=e=>{ne.value=!1,oe.value||(j(e)?(X.value=e,Z.value=l.highlightFirstItem?0:-1):q("ElAutocomplete","autocomplete suggestions must be an array"))};if(ne.value=!0,j(l.fetchSuggestions))a(l.fetchSuggestions);else{const t=await l.fetchSuggestions(e,a);j(t)&&a(t)}}),l.debounce),me=e=>{const a=!!e;if(t(Q,e),t(J,e),oe.value=!1,se.value||(se.value=a),!l.triggerOnFocus&&!e)return oe.value=!0,void(X.value=[]);fe(e)},he=e=>{var a;n.value||("INPUT"!==(null==(a=e.target)?void 0:a.tagName)||ce.value.includes(document.activeElement))&&(se.value=!0)},ye=e=>{t(Y,e)},be=e=>{D||(se.value=!0,t("focus",e),l.triggerOnFocus&&fe(String(l.modelValue)))},Ae=e=>{D||t("blur",e)},$e=()=>{se.value=!1,t(J,""),t("clear")},we=async()=>{re.value&&Z.value>=0&&Z.value<X.value.length?Se(X.value[Z.value]):l.selectWhenUnmatched&&(t("select",{value:l.modelValue}),X.value=[],Z.value=-1)},ke=e=>{re.value&&(e.preventDefault(),e.stopPropagation(),xe())},xe=()=>{se.value=!1},Se=async e=>{t(Q,e[l.valueKey]),t(J,e[l.valueKey]),t("select",e),X.value=[],Z.value=-1},_e=e=>{if(!re.value||ne.value)return;if(e<0)return void(Z.value=-1);e>=X.value.length&&(e=X.value.length-1);const a=P.value.querySelector(`.${N.be("suggestion","wrap")}`),t=a.querySelectorAll(`.${N.be("suggestion","list")} li`)[e],l=a.scrollTop,{offsetTop:s,scrollHeight:o}=t;s+o>l+a.clientHeight&&(a.scrollTop+=o),s<l&&(a.scrollTop-=o),Z.value=e,O.value.ref.setAttribute("aria-activedescendant",`${ue.value}-item-${Z.value}`)};return f(z,(()=>{re.value&&xe()})),m((()=>{O.value.ref.setAttribute("role","textbox"),O.value.ref.setAttribute("aria-autocomplete","list"),O.value.ref.setAttribute("aria-controls","id"),O.value.ref.setAttribute("aria-activedescendant",`${ue.value}-item-${Z.value}`)})),a({highlightedIndex:Z,activated:se,loading:ne,inputRef:O,popperRef:H,suggestions:X,handleSelect:Se,handleKeyEnter:we,focus:()=>{var e;null==(e=O.value)||e.focus()},blur:()=>{var e;null==(e=O.value)||e.blur()},close:xe,highlight:_e}),(e,a)=>(h(),y(w(W),{ref_key:"popperRef",ref:H,visible:w(re),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[w(N).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${w(N).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:de,onShow:ve,onHide:ge},{content:b((()=>[A("div",{ref_key:"regionRef",ref:P,class:S([w(N).b("suggestion"),w(N).is("loading",w(pe))]),style:T({[e.fitInputWidth?"width":"minWidth"]:le.value,outline:"none"}),role:"region"},[$(w(I),{id:w(ue),tag:"ul","wrap-class":w(N).be("suggestion","wrap"),"view-class":w(N).be("suggestion","list"),role:"listbox"},{default:b((()=>[w(pe)?(h(),k("li",ae,[$(w(x),{class:S(w(N).is("loading"))},{default:b((()=>[$(w(_))])),_:1},8,["class"])])):(h(!0),k(B,{key:1},M(X.value,((a,t)=>(h(),k("li",{id:`${w(ue)}-item-${t}`,key:t,class:S({highlighted:Z.value===t}),role:"option","aria-selected":Z.value===t,onClick:e=>Se(a)},[F(e.$slots,"default",{item:a},(()=>[C(E(a[e.valueKey]),1)]))],10,te)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:b((()=>[A("div",{ref_key:"listboxRef",ref:z,class:S([w(N).b(),e.$attrs.class]),style:T(w(ie)),role:"combobox","aria-haspopup":"listbox","aria-expanded":w(re),"aria-owns":w(ue)},[$(w(G),K({ref_key:"inputRef",ref:O},w(s),{"model-value":e.modelValue,onInput:me,onChange:ye,onFocus:be,onBlur:Ae,onClear:$e,onKeydown:[a[0]||(a[0]=R(U((e=>_e(Z.value-1)),["prevent"]),["up"])),a[1]||(a[1]=R(U((e=>_e(Z.value+1)),["prevent"]),["down"])),R(we,["enter"]),R(xe,["tab"]),R(ke,["esc"])],onMousedown:he}),V({_:2},[e.$slots.prepend?{name:"prepend",fn:b((()=>[F(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:b((()=>[F(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:b((()=>[F(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:b((()=>[F(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,ee)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]])),se={class:"map"},oe={class:"search-name"},ne=["title"],ue=n({name:"AmapMarker"}),ie=P(Object.assign(ue,{props:{v:{type:String,default:"1.4.15"},appkey:{type:String,default:""},height:{type:[Number,String],default:500},lnglat:{type:Array,default:()=>[]}},emits:["update:lnglat"],setup(e,{emit:a}){const t=e,l=c("");let s="",o="",n="";const u=d((()=>"string"==typeof t.height?t.height:`${t.height}px`));function i(){s=new AMap.Map("amap",{zoom:12}),AMap.plugin("AMap.ToolBar",(()=>{let e=new AMap.ToolBar;s.addControl(e)})),o=new AMap.Marker({draggable:!0,cursor:"move"}),o.on("dragend",(e=>{a("update:lnglat",[e.lnglat.lng,e.lnglat.lat])})),n=new AMap.Autocomplete,s.on("click",(e=>{r(e.lnglat.getLng(),e.lnglat.getLat())})),2==t.lnglat.length&&r(t.lnglat[0],t.lnglat[1])}function r(e,t){s.remove(o),o.setPosition([e,t]),s.add(o),s.setFitView(),a("update:lnglat",[e,t])}function p(e,a){n.search(e,((e,t)=>{a(t.tips)}))}function v(e){l.value=e.name,e.location?r(e.location.lng,e.location.lat):s.setCity(e.adcode)}return m((()=>{if("undefined"==typeof AMap){let e=document.createElement("script");e.charset="UTF-8",e.src=`https://webapi.amap.com/maps?v=${t.v}&key=${t.appkey}&plugin=AMap.Autocomplete`,document.head.appendChild(e),e.onload=()=>{i()}}else L((()=>{i()}))})),(e,a)=>{const t=H,s=x,o=le;return h(),k("div",se,[$(o,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),class:"search","fetch-suggestions":p,"trigger-on-focus":!1,clearable:"",placeholder:"请输入地址关键字",onSelect:v},{prefix:b((()=>[$(s,{class:"el-input__icon"},{default:b((()=>[$(t,{name:"i-ep:location-information"})])),_:1})])),default:b((({item:e})=>[A("div",oe,E(e.name),1),A("span",{class:"search-address",title:e.district+e.address},E(e.district+e.address),9,ne)])),_:1},8,["modelValue"]),A("div",{id:"amap",style:T(`height:${w(u)};`)},null,4)])}}}),[["__scopeId","data-v-cce91c25"]]),re={name:"ComponentExampleAmap",props:{},data:()=>({lnglat:[120.068384,30.290939]}),created(){},mounted(){},methods:{}};"function"==typeof z&&z(re);const pe=P(re,[["render",function(e,a,t,l,s,o){const n=ie,u=D;return h(),k("div",null,[$(u,null,{default:b((()=>[A("div",null,"经纬度："+E(s.lnglat),1),X(" 注意这里替换高德地图的appkey "),$(n,{lnglat:s.lnglat,"onUpdate:lnglat":a[0]||(a[0]=e=>s.lnglat=e),appkey:"8f7844cc502e17bb549c04c9aaadaf94",height:600},null,8,["lnglat"])])),_:1})])}]]);export{pe as default};
