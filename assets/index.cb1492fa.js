
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{z as e,d as a,Y as t,v as s,Z as l,B as n,r,c as i,y as u,o,$ as c,E as d,f as p,D as h,l as m,h as v,w as f,i as b,a0 as $,a1 as g,Q as y,m as k,n as _,R as x,W as B,S as w,U as S,H as T,V as j,O as I,L as O,b as P,e as C,P as V}from"./index.7b80eec3.js";/* empty css                 */import{E as D}from"./index2.58f47f0e.js";import"./event2.c09267d7.js";const E=e=>(w("data-v-4218a312"),e=e(),S(),e),H={class:"container"},L={key:0,class:"tips"},q={class:"tip"},K=E((()=>h("span",null,"Alt",-1))),M=g("+"),N=E((()=>h("span",null,"S",-1))),U={class:"tip"},z={class:"tip"},A={class:"tip"},Q=E((()=>h("span",null,"ESC",-1))),R=["href","target","onClick","onMouseover"],W={class:"icon"},Y={class:"info"},Z={class:"title"},F={class:"breadcrumb"},G={class:"path"},J=a({name:"Search"});var X=e(Object.assign(J,{setup(e){const{proxy:a}=T(),{t:w}=t.exports.useI18n(),S=s(),E=l(),J=n(),X=j("generateI18nTitle"),ee=r(!1),ae=r(""),te=r([]),se=r(-1),le=i((()=>{let e=[];return e=te.value.filter((e=>{let a=!1;return X(e.i18n,e.title).indexOf(ae.value)>=0&&(a=!0),e.path.indexOf(ae.value)>=0&&(a=!0),e.breadcrumb.some((e=>X(e.i18n,e.title).indexOf(ae.value)>=0))&&(a=!0),a})),e}));function ne(e){e.map((e=>{if(!1!==e.meta.sidebar)if(function(e){let a=!0;return e.children?e.children.every((e=>!1===e.meta.sidebar))&&(a=!1):a=!1,a}(e)){let a=e.meta.baseBreadcrumb?c(e.meta.baseBreadcrumb):[];a.push({title:e.meta.title,i18n:e.meta.i18n});let t=c(e.children);t.map((t=>{t.meta.baseIcon=e.meta.icon||e.meta.baseIcon,t.meta.baseBreadcrumb=a,t.meta.basePath=e.meta.basePath?[e.meta.basePath,e.path].join("/"):e.path})),ne(t)}else{let a=[];e.meta.baseBreadcrumb&&(a=c(e.meta.baseBreadcrumb)),a.push({title:e.meta.title,i18n:e.meta.i18n});let t="";t=I(e.path)?e.path:e.meta.basePath?[e.meta.basePath,e.path].join("/"):e.path,te.value.push({icon:e.meta.icon||e.meta.baseIcon,title:e.meta.title,i18n:e.meta.i18n,breadcrumb:a,path:t})}}))}function re(){le.value.length&&(se.value-=1,se.value<0&&(se.value=le.value.length-1),oe())}function ie(){le.value.length&&(se.value+=1,se.value>le.value.length-1&&(se.value=0),oe())}function ue(){-1!==se.value&&a.$refs[`search-item-${se.value}`][0].click()}function oe(){let e=0;if(-1!==se.value){e=a.$refs.search.scrollTop;const t=a.$refs[`search-item-${se.value}`][0].offsetTop,s=a.$refs[`search-item-${se.value}`][0].clientHeight,l=a.$refs.search.scrollTop,n=a.$refs.search.clientHeight;t+s>l+n?e=t+s-n:t<=l&&(e=t)}a.$refs.search.scrollTo({top:e})}return u((()=>ee.value),(e=>{e?(document.querySelector("body").classList.add("hidden"),a.$refs.search.scrollTop=0,a.$hotkeys("up",re),a.$hotkeys("down",ie),a.$hotkeys("enter",ue),setTimeout((()=>{a.$refs.input.focus()}),500)):(document.querySelector("body").classList.remove("hidden"),a.$hotkeys.unbind("up",re),a.$hotkeys.unbind("down",ie),a.$hotkeys.unbind("enter",ue),setTimeout((()=>{ae.value="",se.value=-1}),500))})),u((()=>le.value),(()=>{se.value=-1,oe()})),o((()=>{a.$eventBus.on("global-search-toggle",(()=>{ee.value=!ee.value})),a.$hotkeys("alt+s",(e=>{S.toolbar.enableNavSearch&&(e.preventDefault(),ee.value=!0)})),a.$hotkeys("esc",(e=>{S.toolbar.enableNavSearch&&(e.preventDefault(),ee.value=!1)})),"filesystem"!==S.app.routeBaseOn?E.routes.map((e=>{ne(e.children)})):J.menus.map((e=>{ne(e.children)}))})),(e,a)=>{const t=V,s=d,l=D,n=O("router-link");return P(),p("div",{id:"search",class:_({searching:ee.value}),onClick:a[3]||(a[3]=a=>ee.value&&e.$eventBus.emit("global-search-toggle"))},[h("div",H,[h("div",{class:"search-box",onClick:a[2]||(a[2]=m((()=>{}),["stop"]))},[v(l,{ref:"input",modelValue:ae.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ae.value=e),placeholder:b(w)("app.search.input"),clearable:"",onKeydown:[a[1]||(a[1]=$((a=>e.$eventBus.emit("global-search-toggle")),["esc"])),$(m(re,["prevent"]),["up"]),$(m(ie,["prevent"]),["down"]),$(m(ue,["prevent"]),["enter"])]},{prefix:f((()=>[v(s,null,{default:f((()=>[v(t,{name:"i-ep:search"})])),_:1})])),_:1},8,["modelValue","placeholder","onKeydown"]),"pc"===b(S).mode?(P(),p("div",L,[h("div",q,[K,M,N,g(" "+y(b(w)("app.search.alt_s")),1)]),h("div",U,[h("span",null,[v(s,null,{default:f((()=>[v(t,{name:"i-ant-design:caret-up-filled"})])),_:1})]),h("span",null,[v(s,null,{default:f((()=>[v(t,{name:"i-ant-design:caret-down-filled"})])),_:1})]),g(" "+y(b(w)("app.search.up_down")),1)]),h("div",z,[h("span",null,[v(s,null,{default:f((()=>[v(t,{name:"i-ion:md-return-left"})])),_:1})]),g(" "+y(b(w)("app.search.enter")),1)]),h("div",A,[Q,g(" "+y(b(w)("app.search.esc")),1)])])):k("v-if",!0)]),h("div",{ref:"search",class:_(["result",{mobile:"mobile"===b(S).mode}])},[(P(!0),p(x,null,B(b(le),((e,a)=>(P(),C(n,{key:e.path,custom:"",to:ee.value?e.path:""},{default:f((({href:l,navigate:n})=>[h("a",{ref_for:!0,ref:`search-item-${a}`,href:b(I)(e.path)?e.path:l,class:_(["item",{actived:a===se.value}]),target:b(I)(e.path)?"_blank":"_self",onClick:n,onMouseover:e=>se.value=a},[h("div",W,[e.icon?(P(),C(s,{key:0},{default:f((()=>[v(t,{name:e.icon},null,8,["name"])])),_:2},1024)):k("v-if",!0)]),h("div",Y,[h("div",Z,y(b(X)(e.i18n,e.title)),1),h("div",F,[(P(!0),p(x,null,B(e.breadcrumb,((e,a)=>(P(),p("span",{key:a},[g(y(b(X)(e.i18n,e.title))+" ",1),v(s,null,{default:f((()=>[v(t,{name:"i-ep:arrow-right"})])),_:1})])))),128))]),h("div",G,y(e.path),1)])],42,R)])),_:2},1032,["to"])))),128))],2)])],2)}}}),[["__scopeId","data-v-4218a312"]]);export{X as default};
