
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{a8 as e,ay as t,d as o,E as s,bj as n,u as a,r as l,c as i,bi as r,o as c,a as u,_ as p,ax as f,al as d,F as m,b as y,e as g,w as v,H as b,I as h,G as C,n as x,J as k,m as T,M as S,k as E,g as I,f as _,N as w,l as z,h as H,T as L,b4 as M,bt as N,bu as j,bv as B,aD as $,bw as F,bx as O}from"./index.3b0b287f.js";const q=["success","info","warning","error"],A=o({name:"ElNotification",components:{ElIcon:s,...n},props:e({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:t([String,Object]),default:""},id:{type:String,default:""},message:{type:t([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:t(Function),default:()=>{}},onClose:{type:t(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...q,""],default:""},zIndex:{type:Number,default:0}}),emits:{destroy:()=>!0},setup(e){const t=a("notification"),o=l(!1);let s;const n=i((()=>{const o=e.type;return o&&r[e.type]?t.m(o):""})),p=i((()=>r[e.type]||e.icon||"")),m=i((()=>e.position.endsWith("right")?"right":"left")),y=i((()=>e.position.startsWith("top")?"top":"bottom")),g=i((()=>({[y.value]:`${e.offset}px`,zIndex:e.zIndex})));function v(){e.duration>0&&({stop:s}=f((()=>{o.value&&h()}),e.duration))}function b(){null==s||s()}function h(){o.value=!1}return c((()=>{v(),o.value=!0})),u(document,"keydown",(function({code:e}){e===d.delete||e===d.backspace?b():e===d.esc?o.value&&h():v()})),{ns:t,horizontalClass:m,typeClass:n,iconComponent:p,positionStyle:g,visible:o,close:h,clearTimer:b,startTimer:v}}}),D=["id"],U=["textContent"],W={key:0},G=["innerHTML"];var J=p(A,[["render",function(e,t,o,s,n,a){const l=m("el-icon"),i=m("close");return y(),g(L,{name:e.ns.b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[3]||(t[3]=t=>e.$emit("destroy")),persisted:""},{default:v((()=>[b(C("div",{id:e.id,class:x([e.ns.b(),e.customClass,e.horizontalClass]),style:E(e.positionStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...t)=>e.clearTimer&&e.clearTimer(...t)),onMouseleave:t[1]||(t[1]=(...t)=>e.startTimer&&e.startTimer(...t)),onClick:t[2]||(t[2]=(...t)=>e.onClick&&e.onClick(...t))},[e.iconComponent?(y(),g(l,{key:0,class:x([e.ns.e("icon"),e.typeClass])},{default:v((()=>[(y(),g(k(e.iconComponent)))])),_:1},8,["class"])):T("v-if",!0),C("div",{class:x(e.ns.e("group"))},[C("h2",{class:x(e.ns.e("title")),textContent:S(e.title)},null,10,U),b(C("div",{class:x(e.ns.e("content")),style:E(e.title?void 0:{margin:0})},[I(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(y(),_(w,{key:1},[T(" Caution here, message could've been compromized, nerver use user's input as message "),T(" eslint-disable-next-line "),C("p",{innerHTML:e.message},null,8,G)],2112)):(y(),_("p",W,S(e.message),1))]))],6),[[h,e.message]]),e.showClose?(y(),g(l,{key:0,class:x(e.ns.e("closeBtn")),onClick:z(e.close,["stop"])},{default:v((()=>[H(i)])),_:1},8,["class","onClick"])):T("v-if",!0)],2)],46,D),[[h,e.visible]])])),_:3},8,["name","onBeforeLeave"])}],["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const Z={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]};let K=1;const P=function(e={},t=null){if(!M)return{close:()=>{}};("string"==typeof e||N(e))&&(e={message:e});const o=e.position||"top-right";let s=e.offset||0;Z[o].forEach((({vm:e})=>{var t;s+=((null==(t=e.el)?void 0:t.offsetHeight)||0)+16})),s+=16;const{nextZIndex:n}=j(),a="notification_"+K++,l=e.onClose,i={zIndex:n(),offset:s,...e,id:a,onClose:()=>{!function(e,t,o){const s=Z[t],n=s.findIndex((({vm:t})=>{var o;return(null==(o=t.component)?void 0:o.props.id)===e}));if(-1===n)return;const{vm:a}=s[n];if(!a)return;null==o||o(a);const l=a.el.offsetHeight,i=t.split("-")[0];s.splice(n,1);const r=s.length;if(r<1)return;for(let c=n;c<r;c++){const{el:e,component:t}=s[c].vm,o=Number.parseInt(e.style[i],10)-l-16;t.props.offset=o}}(a,o,l)}};let r=document.body;B(e.appendTo)?r=e.appendTo:$(e.appendTo)&&(r=document.querySelector(e.appendTo)),B(r)||(r=document.body);const c=document.createElement("div"),u=H(J,i,N(i.message)?{default:()=>i.message}:null);return u.appContext=null!=t?t:P._context,u.props.onDestroy=()=>{F(null,c)},F(u,c),Z[o].push({vm:u}),r.appendChild(c.firstElementChild),{close:()=>{u.component.proxy.visible=!1}}};q.forEach((e=>{P[e]=(t={})=>(("string"==typeof t||N(t))&&(t={message:t}),P({...t,type:e}))})),P.closeAll=function(){for(const e of Object.values(Z))e.forEach((({vm:e})=>{e.component.proxy.visible=!1}))},P._context=null;const Q=O(P,"$notify");export{Q as E};
