
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{cC as e,ce as n,a8 as a,ay as t,d as r,b8 as s,u as l,U as o,c as i,r as u,b as c,f as p,G as d,n as m,i as f,M as v,h as b,m as g,_ as h,b_ as k,bW as w,al as S,at as y,ae as A}from"./index.503ec71c.js";import{d as _,u as V,f as O,g as x,h as C,c as R,t as E,T,i as D,C as I}from"./panel-time-pick.6ede2cca.js";import{b as M}from"./_baseFlatten.7b1fe882.js";import{a as P,S as j,s as B,b as H,c as U}from"./isEqual.add373df.js";function F(e){return e}function K(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}var q=Date.now;var G=e?function(n,a){return e(n,"toString",{configurable:!0,enumerable:!1,value:(t=a,function(){return t}),writable:!0});var t}:F;var W,$,z;const J=(W=G,$=0,z=0,function(){var e=q(),n=16-(e-z);if(z=e,n>0){if(++$>=800)return arguments[0]}else $=0;return W.apply(void 0,arguments)});function L(e){return e!=e}function N(e,n){return!!(null==e?0:e.length)&&function(e,n,a){return n==n?function(e,n,a){for(var t=a-1,r=e.length;++t<r;)if(e[t]===n)return t;return-1}(e,n,a):function(e,n,a,t){for(var r=e.length,s=a+(t?1:-1);t?s--:++s<r;)if(n(e[s],s,e))return s;return-1}(e,L,a)}(e,n,0)>-1}var Q=Math.max;function X(e){return n(e)&&P(e)}function Y(e,n,a){for(var t=-1,r=null==e?0:e.length;++t<r;)if(a(n,e[t]))return!0;return!1}const Z=j&&1/B(new j([,-0]))[1]==1/0?function(e){return new j(e)}:function(){};var ee=function(e,n){return J(function(e,n,a){return n=Q(void 0===n?e.length-1:n,0),function(){for(var t=arguments,r=-1,s=Q(t.length-n,0),l=Array(s);++r<s;)l[r]=t[n+r];r=-1;for(var o=Array(n+1);++r<n;)o[r]=t[r];return o[n]=a(l),K(e,this,o)}}(e,n,F),e+"")}((function(e){return function(e,n,a){var t=-1,r=N,s=e.length,l=!0,o=[],i=o;if(a)l=!1,r=Y;else if(s>=200){var u=n?null:Z(e);if(u)return B(u);l=!1,r=U,i=new H}else i=n?[]:o;e:for(;++t<s;){var c=e[t],p=n?n(c):c;if(c=a||0!==c?c:0,l&&p==p){for(var d=i.length;d--;)if(i[d]===p)continue e;n&&i.push(p),o.push(c)}else r(i,p,a)||(i!==o&&i.push(p),o.push(c))}return o}(M(e,1,X,!0))}));const ne=ee,ae=a({..._,parsedValue:{type:t(Array)}}),te=["disabled"];var re=h(r({__name:"panel-time-range",props:ae,emits:["pick","select-range","set-picker-option"],setup(e,{emit:n}){const a=e,t=(e,n)=>{const a=[];for(let t=e;t<=n;t++)a.push(t);return a},{t:r,lang:h}=s(),y=l("time"),A=l("picker"),_=o("EP_PICKER_BASE"),{arrowControl:R,disabledHours:E,disabledMinutes:T,disabledSeconds:D,defaultValue:I}=_.props,M=i((()=>a.parsedValue[0])),P=i((()=>a.parsedValue[1])),j=V(a),B=i((()=>a.format.includes("ss"))),H=i((()=>a.format.includes("A")?"A":a.format.includes("a")?"a":"")),U=e=>{K(e.millisecond(0),P.value)},F=e=>{K(M.value,e.millisecond(0))},K=(e,a)=>{n("pick",[e,a],!0)},q=i((()=>M.value>P.value)),G=u([0,2]),W=(e,a)=>{n("select-range",e,a,"min"),G.value=[e,a]},$=i((()=>B.value?11:8)),z=(e,a)=>{n("select-range",e,a,"max");const t=f($);G.value=[e+t,a+t]},J=(e,n)=>{const a=E?E(e):[],r="start"===e,s=(n||(r?P.value:M.value)).hour(),l=r?t(s+1,23):t(0,s-1);return ne(a,l)},L=(e,n,a)=>{const r=T?T(e,n):[],s="start"===n,l=a||(s?P.value:M.value);if(e!==l.hour())return r;const o=l.minute(),i=s?t(o+1,59):t(0,o-1);return ne(r,i)},N=(e,n,a,r)=>{const s=D?D(e,n,a):[],l="start"===a,o=r||(l?P.value:M.value),i=o.hour(),u=o.minute();if(e!==i||n!==u)return s;const c=o.second(),p=l?t(c+1,59):t(0,c-1);return ne(s,p)},Q=([e,n])=>[ae(e,"start",!0,n),ae(n,"end",!1,e)],{getAvailableHours:X,getAvailableMinutes:Y,getAvailableSeconds:Z}=O(J,L,N),{timePickerOptions:ee,getAvailableTime:ae,onSetOption:re}=x({getAvailableHours:X,getAvailableMinutes:Y,getAvailableSeconds:Z});return n("set-picker-option",["formatToString",e=>e?w(e)?e.map((e=>e.format(a.format))):e.format(a.format):null]),n("set-picker-option",["parseUserInput",e=>e?w(e)?e.map((e=>k(e,a.format).locale(h.value))):k(e,a.format).locale(h.value):null]),n("set-picker-option",["isValidValue",e=>{const n=e.map((e=>k(e).locale(h.value))),a=Q(n);return n[0].isSame(a[0])&&n[1].isSame(a[1])}]),n("set-picker-option",["handleKeydownInput",e=>{const n=e.code,{left:a,right:t,up:r,down:s}=S;if([a,t].includes(n)){return(e=>{const n=B.value?[0,3,6,11,14,17]:[0,3,8,11],a=["hours","minutes"].concat(B.value?["seconds"]:[]),t=(n.indexOf(G.value[0])+e+n.length)%n.length,r=n.length/2;t<r?ee.start_emitSelectRange(a[t]):ee.end_emitSelectRange(a[t-r])})(n===a?-1:1),void e.preventDefault()}if([r,s].includes(n)){const a=n===r?-1:1,t=G.value[0]<$.value?"start":"end";return ee[`${t}_scrollDown`](a),void e.preventDefault()}}]),n("set-picker-option",["getDefaultValue",()=>{if(w(I))return I.map((e=>k(e).locale(h.value)));const e=k(I).locale(h.value);return[e,e.add(60,"m")]}]),n("set-picker-option",["getRangeAvailableTime",Q]),(e,a)=>e.actualVisible?(c(),p("div",{key:0,class:m([f(y).b("range-picker"),f(A).b("panel")])},[d("div",{class:m(f(y).be("range-picker","content"))},[d("div",{class:m(f(y).be("range-picker","cell"))},[d("div",{class:m(f(y).be("range-picker","header"))},v(f(r)("el.datepicker.startTime")),3),d("div",{class:m([f(y).be("range-picker","body"),f(y).be("panel","content"),f(y).is("arrow",f(R)),{"has-seconds":f(B)}])},[b(C,{ref:"minSpinner",role:"start","show-seconds":f(B),"am-pm-mode":f(H),"arrow-control":f(R),"spinner-date":f(M),"disabled-hours":J,"disabled-minutes":L,"disabled-seconds":N,onChange:U,onSetOption:f(re),onSelectRange:W},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),d("div",{class:m(f(y).be("range-picker","cell"))},[d("div",{class:m(f(y).be("range-picker","header"))},v(f(r)("el.datepicker.endTime")),3),d("div",{class:m([f(y).be("range-picker","body"),f(y).be("panel","content"),f(y).is("arrow",f(R)),{"has-seconds":f(B)}])},[b(C,{ref:"maxSpinner",role:"end","show-seconds":f(B),"am-pm-mode":f(H),"arrow-control":f(R),"spinner-date":f(P),"disabled-hours":J,"disabled-minutes":L,"disabled-seconds":N,onChange:F,onSetOption:f(re),onSelectRange:z},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),d("div",{class:m(f(y).be("panel","footer"))},[d("button",{type:"button",class:m([f(y).be("panel","btn"),"cancel"]),onClick:a[0]||(a[0]=e=>{n("pick",j.value,!1)})},v(f(r)("el.datepicker.cancel")),3),d("button",{type:"button",class:m([f(y).be("panel","btn"),"confirm"]),disabled:f(q),onClick:a[1]||(a[1]=e=>((e=!1)=>{n("pick",[M.value,P.value],e)})())},v(f(r)("el.datepicker.confirm")),11,te)],2)],2)):g("v-if",!0)}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);k.extend(R);const se=r({name:"ElTimePicker",install:null,props:{...E,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,n){const a=u(),[t,r]=e.isRange?["timerange",re]:["time",T],s=e=>n.emit("update:modelValue",e);return y("ElPopperOptions",e.popperOptions),n.expose({focus:e=>{var n;null==(n=a.value)||n.handleFocusInput(e)},blur:e=>{var n;null==(n=a.value)||n.handleBlurInput(e)}}),()=>{var n;const l=null!=(n=e.format)?n:D;return b(I,A(e,{ref:a,type:t,format:l,"onUpdate:modelValue":s}),{default:e=>b(r,e,null)})}}});se.install=e=>{e.component(se.name,se)};const le=se;export{le as E};
