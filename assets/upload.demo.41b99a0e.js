
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{d as e,A as a,b as t,e as s,w as i,f as l,F as n,h as r,m as o,U as d,V as u,a9 as c,Q as p,E as m,a2 as h,r as g,S as f,X as y,k as v,G as x,H as b,n as w,cS as $,cU as k,bI as _,c7 as S,c6 as j}from"./index.a82b8a9a.js";import{E as O,a as z,_ as I}from"./index.71a84dc4.js";import{E as U}from"./el-alert.404e2052.js";const C={class:"slot"},V=(e=>(d("data-v-33db3c5a"),e=e(),u(),e))((()=>n("div",{class:"el-upload__text"},[h("将文件拖到此处，或"),n("em",null,"点击上传")],-1))),B={key:0,class:"el-upload__tip"},E={style:{display:"inline-block"}},N=e({name:"FileUpload"});var A=a(Object.assign(N,{props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},size:{type:Number,default:2},max:{type:Number,default:3},files:{type:Array,default:()=>[]},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["zip","rar"]}},emits:["on-success"],setup(e,{emit:a}){const d=e;function u(e){const a=e.name.split("."),t=a[a.length-1],s=d.ext.indexOf(t)>=0,i=e.size/1024/1024<d.size;return s||c.error(`上传文件只支持 ${d.ext.join(" / ")} 格式！`),i||c.error(`上传文件大小不能超过 ${d.size}MB！`),s&&i}function h(){c.warning("文件上传超过限制")}function g(e,t){a("on-success",e,t)}return(a,d)=>{const c=p,f=m,y=U,v=O;return t(),s(v,{headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":u,"on-exceed":h,"on-success":g,"file-list":e.files,limit:e.max,drag:""},{tip:i((()=>[e.notip?o("v-if",!0):(t(),l("div",B,[n("div",E,[r(y,{title:`上传文件支持 ${e.ext.join(" / ")} 格式，单个文件大小不超过 ${e.size}MB，且文件数量不超过 ${e.max} 个`,type:"info","show-icon":"",closable:!1},null,8,["title"])])]))])),default:i((()=>[n("div",C,[r(f,{class:"el-icon--upload"},{default:i((()=>[r(c,{name:"i-ep:upload-filled"})])),_:1}),V])])),_:1},8,["headers","action","data","name","file-list","limit"])}}}),[["__scopeId","data-v-33db3c5a"]]);const M={class:"upload-container"},T={class:"mask"},F={class:"actions"},K=["onClick"],q=["onClick"],L=["onClick"],R=["onClick"],G={key:0,class:"el-upload__tip"},H={style:{display:"inline-block"}},Q=e({name:"ImagesUpload"});var X=a(Object.assign(Q,{props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:Array,default:()=>[]},max:{type:Number,default:3},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp"]}},emits:["update:url","on-success"],setup(e,{emit:a}){const d=e,u=g({dialogImageIndex:0,imageViewerVisible:!1,progress:{preview:"",percent:0}});function h(){u.value.imageViewerVisible=!1}function _(e,t){let s=d.url;"left"==t&&0!=e&&(s[e]=s.splice(e-1,1,s[e])[0]),"right"==t&&e!=s.length-1&&(s[e]=s.splice(e+1,1,s[e])[0]),a("update:url",s)}function S(e){const a=e.name.split("."),t=a[a.length-1],s=d.ext.indexOf(t)>=0,i=e.size/1024/1024<d.size;return s||c.error(`上传图片只支持 ${d.ext.join(" / ")} 格式！`),i||c.error(`上传图片大小不能超过 ${d.size}MB！`),s&&i&&(u.value.progress.preview=URL.createObjectURL(e)),s&&i}function j(e){u.value.progress.percent=~~e.percent}function I(e){u.value.progress.preview="",u.value.progress.percent=0,a("on-success",e)}return(c,g)=>{const C=$,V=p,B=m,E=z,N=O,A=U,Q=k;return t(),l("div",M,[(t(!0),l(f,null,y(e.url,((c,p)=>(t(),l("div",{key:p,class:"images"},[p<e.max?(t(),s(C,{key:0,src:c,style:v(`width:${e.width}px;height:${e.height}px;`),fit:"cover"},null,8,["src","style"])):o("v-if",!0),n("div",T,[n("div",F,[n("span",{title:"预览",onClick:e=>function(e){u.value.dialogImageIndex=e,u.value.imageViewerVisible=!0}(p)},[r(B,null,{default:i((()=>[r(V,{name:"i-ep:zoom-in"})])),_:1})],8,K),n("span",{title:"移除",onClick:e=>function(e){let t=d.url;t.splice(e,1),a("update:url",t)}(p)},[r(B,null,{default:i((()=>[r(V,{name:"i-ep:delete"})])),_:1})],8,q),x(n("span",{title:"左移",class:w({disabled:0==p}),onClick:e=>_(p,"left")},[r(B,null,{default:i((()=>[r(V,{name:"i-ep:back"})])),_:1})],10,L),[[b,e.url.length>1]]),x(n("span",{title:"右移",class:w({disabled:p==e.url.length-1}),onClick:e=>_(p,"right")},[r(B,null,{default:i((()=>[r(V,{name:"i-ep:right"})])),_:1})],10,R),[[b,e.url.length>1]])])])])))),128)),x(r(N,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":S,"on-progress":j,"on-success":I,drag:"",class:"images-upload"},{default:i((()=>[n("div",{class:"image-slot",style:v(`width:${e.width}px;height:${e.height}px;`)},[r(B,null,{default:i((()=>[r(V,{name:"i-ep:plus"})])),_:1})],4),x(n("div",{class:"progress",style:v(`width:${e.width}px;height:${e.height}px;`)},[r(C,{src:u.value.progress.preview,style:v(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),r(E,{type:"circle",width:.8*Math.min(e.width,e.height),percentage:u.value.progress.percent},null,8,["width","percentage"])],4),[[b,u.value.progress.percent]])])),_:1},8,["headers","action","data","name"]),[[b,e.url.length<e.max]]),e.notip?o("v-if",!0):(t(),l("div",G,[n("div",H,[r(A,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，单张图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}，且图片数量不超过 ${e.max} 张`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),u.value.imageViewerVisible?(t(),s(Q,{key:1,"url-list":e.url,"initial-index":u.value.dialogImageIndex,onClose:h},null,8,["url-list","initial-index"])):o("v-if",!0)])}}}),[["__scopeId","data-v-34974e8e"]]);const D={data:()=>({image:"",images:[],files:[{name:"测试文件.zip",url:"http://images.lookbi.com/uploads/apply/96/d8521fc691e472eec91a170201866e7d.zip"}]}),mounted(){this.image="https://picsum.photos/400",this.images=["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]},methods:{handleSuccess1(e){""==e.error?this.image=e.data.path:this.$message.warning(e.error)},handleSuccess2(e){""==e.error?this.images.push(e.data.path):this.$message.warning(e.error)},handleSuccess3(e,a){this.files.push({name:a.name,url:""==e.error?e.data.path:""}),this.$nextTick((()=>{""!=e.error&&(this.$message.warning(e.error),this.files.pop())}))}}};"function"==typeof _&&_(D);var J=a(D,[["render",function(e,a,s,n,o,d){const u=j,c=I,p=S,m=X,h=A;return t(),l("div",null,[r(u,{title:"上传",content:"ImageUpload / ImagesUpload / FileUpload"}),r(p,{title:"单图上传"},{default:i((()=>[r(c,{url:o.image,"onUpdate:url":a[0]||(a[0]=e=>o.image=e),action:"http://scrm.1daas.com/api/upload/upload",name:"image",width:250,height:150,data:{token:"TKE615916022101558"},onOnSuccess:d.handleSuccess1},null,8,["url","onOnSuccess"])])),_:1}),r(p,{title:"多图上传（默认最多3张）"},{default:i((()=>[r(m,{url:o.images,"onUpdate:url":a[1]||(a[1]=e=>o.images=e),action:"http://scrm.1daas.com/api/upload/upload",name:"image",data:{token:"TKE615916022101558"},onOnSuccess:d.handleSuccess2},null,8,["url","onOnSuccess"])])),_:1}),r(p,{title:"文件上传（默认最多3个）"},{default:i((()=>[r(h,{files:o.files,action:"http://scrm.1daas.com/api/upload/upload",name:"image",data:{token:"TKE615916022101558"},onOnSuccess:d.handleSuccess3},null,8,["files","onOnSuccess"])])),_:1})])}]]);export{J as default};
