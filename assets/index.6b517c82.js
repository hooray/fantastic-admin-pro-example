
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{r as e,c as a,cn as l,co as o,f as t,h as u,w as i,bI as m,c7 as n,b as d,i as r,a2 as s,R as h,S as f,X as p,e as _,c6 as c}from"./index.6746a3d3.js";import{E as b,a as v}from"./el-form.65d9f06e.js";import{E as z,a as g}from"./el-table-column.e07b1484.js";import{E as $,a as w}from"./el-checkbox.023fa200.js";/* empty css               */import"./el-tooltip.0ca4bad9.js";/* empty css                     *//* empty css                          */import"./el-form-item.3d23d1d6.js";import{E as j}from"./el-input.a13ee31e.js";import"./isEqual.09ccf48c.js";import"./index.66af64ac.js";import"./event.a088884a.js";const x={__name:"index",setup(m){const x=e([{name:"站点管理",module:"station",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"停用",module:"disabled"},{name:"编辑",module:"edit"},{name:"启用",module:"enable"}]},{name:"部门管理",module:"department",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"删除",module:"delete"},{name:"编辑",module:"edit"},{name:"新增",module:"new"}]},{name:"职位管理",module:"department_job",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"新增",module:"new"},{name:"编辑",module:"edit"},{name:"删除",module:"delete"}]},{name:"角色管理",module:"role",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"删除",module:"delete"},{name:"编辑",module:"edit"},{name:"新增",module:"new"}]},{name:"管理员管理",module:"admin_manager",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"编辑权限",module:"authorization_edit"},{name:"查看权限详情",module:"authorization_info"},{name:"删除",module:"delete"},{name:"停用",module:"disabled"},{name:"编辑",module:"edit"},{name:"启用",module:"enable"},{name:"新增",module:"new"},{name:"重置密码",module:"reset"}]}]),V=e({name:"",brief:"",authorization_list:[]}),E=e({name:[{required:!0,message:"请输入名称",trigger:"blur"}],authorization_list:[{validator:(e,a,l)=>{0==a.length?l(new Error("至少选择一个权限")):l()},trigger:"change"}]}),k=a((()=>{let e=[];return x.value.forEach((a=>{let l=[];a.authorization_list.forEach((e=>{V.value.authorization_list.includes(`${a.module}.${e.module}`)&&l.push(`${a.module}.${e.module}`)})),e.push({checkAll:l.length==a.authorization_list.length,indeterminate:l.length>0&&l.length<a.authorization_list.length})})),e}));return(e,a)=>{const m=c,U=j,y=b,A=$,R=z,q=w,C=g,I=v,S=l,X=o,B=n;return d(),t("div",null,[u(m,{title:"权限",content:"该页面生成的权限格式，可直接用于本项目的权限模式"}),u(B,null,{default:i((()=>[u(X,null,{default:i((()=>[u(S,{md:24,lg:18},{default:i((()=>[u(I,{model:V.value,rules:E.value,"label-width":"120px","label-suffix":"："},{default:i((()=>[u(y,{label:"名称",prop:"name"},{default:i((()=>[u(U,{modelValue:V.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value.name=e),placeholder:"请输入角色名称"},null,8,["modelValue"])])),_:1}),u(y,{label:"简介"},{default:i((()=>[u(U,{modelValue:V.value.brief,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value.brief=e),type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"请输入角色简介"},null,8,["modelValue"])])),_:1}),u(y,{label:"权限",prop:"authorization_list"},{default:i((()=>[u(C,{data:x.value,border:"",stripe:"","highlight-current-row":"",style:{"line-height":"normal"}},{default:i((()=>[u(R,{prop:"name",width:"200",label:"模块"},{default:i((e=>[u(A,{modelValue:r(k)[e.$index].checkAll,"onUpdate:modelValue":a=>r(k)[e.$index].checkAll=a,indeterminate:r(k)[e.$index].indeterminate,onChange:a=>{return l=a,o=e.$index,void(l?x.value[o].authorization_list.forEach((e=>{V.value.authorization_list.includes(`${x.value[o].module}.${e.module}`)||V.value.authorization_list.push(`${x.value[o].module}.${e.module}`)})):x.value[o].authorization_list.forEach((e=>{V.value.authorization_list=V.value.authorization_list.filter((a=>a!=`${x.value[o].module}.${e.module}`))})));var l,o}},{default:i((()=>[s(h(e.row.name),1)])),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","onChange"])])),_:1}),u(R,{label:"权限"},{default:i((e=>[u(q,{modelValue:V.value.authorization_list,"onUpdate:modelValue":a[2]||(a[2]=e=>V.value.authorization_list=e)},{default:i((()=>[(d(!0),t(f,null,p(e.row.authorization_list,(a=>(d(),_(A,{key:`${e.row.module}.${a.module}`,label:`${e.row.module}.${a.module}`},{default:i((()=>[s(h(a.name),1)])),_:2},1032,["label"])))),128))])),_:2},1032,["modelValue"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})])}}};"function"==typeof m&&m(x);export{x as default};
