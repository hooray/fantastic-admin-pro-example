
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{a8 as e,ay as a,az as l,cF as o,aM as t,cG as u,aP as s,d as r,U as d,b_ as i,c0 as n,aW as v,u as c,aV as m,r as f,c as p,bZ as h,aE as y,y as b,b as V,f as x,N as w,Z as g,n as S,i as k,h as C,w as T,e as j,J as M,m as _,k as H,E as I,M as A,_ as B,al as N,ao as U,q as E,A as F,bP as P,F as $,bR as D,bQ as O}from"./index.b5d679a7.js";import W from"./alert.fb5e3806.js";import{i as q}from"./validator.c3056c95.js";import{C as z,U as R}from"./event.d298a7ab.js";import"./el-alert.74c2c762.js";import"./el-link.ab86ff3f.js";const Z=e({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:a([Array,Object]),default:()=>l(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:a([Array,Object]),default:()=>[o,o,o]},voidIcon:{type:t,default:()=>u},disabledVoidIcon:{type:t,default:()=>o},disabled:{type:Boolean},allowHalf:{type:Boolean},showText:{type:Boolean},showScore:{type:Boolean},textColor:{type:String,default:""},texts:{type:a(Array),default:()=>l(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:q},label:{type:String,default:void 0}}),G=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],J=["onMousemove","onClick"];const K=E(B(r({name:"ElRate",props:Z,emits:{[z]:e=>s(e),[R]:e=>s(e)},setup(e,{expose:a,emit:l}){const o=e;function t(e,a){const l=e=>y(e),o=Object.keys(a).map((e=>+e)).filter((o=>{const t=a[o];return!!l(t)&&t.excluded?e<o:e<=o})).sort(((e,a)=>e-a)),t=a[o[0]];return l(t)&&t.value||t}const u=d(i,void 0),s=d(n,void 0),r=v(),B=c("rate"),{inputId:E,isLabeledByFormItem:F}=m(o,{formItemContext:s}),P=f(o.modelValue),$=f(-1),D=f(!0),O=p((()=>[B.b(),B.m(r.value)])),W=p((()=>o.disabled||(null==u?void 0:u.disabled))),q=p((()=>B.cssVarBlock({"void-color":o.voidColor,"disabled-void-color":o.disabledVoidColor,"fill-color":L.value}))),z=p((()=>{let e="";return o.showScore?e=o.scoreTemplate.replace(/\{\s*value\s*\}/,W.value?`${o.modelValue}`:`${P.value}`):o.showText&&(e=o.texts[Math.ceil(P.value)-1]),e})),Z=p((()=>100*o.modelValue-100*Math.floor(o.modelValue))),K=p((()=>h(o.colors)?{[o.lowThreshold]:o.colors[0],[o.highThreshold]:{value:o.colors[1],excluded:!0},[o.max]:o.colors[2]}:o.colors)),L=p((()=>{const e=t(P.value,K.value);return y(e)?"":e})),Q=p((()=>{let e="";return W.value?e=`${Z.value}%`:o.allowHalf&&(e="50%"),{color:L.value,width:e}})),X=p((()=>h(o.icons)?{[o.lowThreshold]:o.icons[0],[o.highThreshold]:{value:o.icons[1],excluded:!0},[o.max]:o.icons[2]}:o.icons)),Y=p((()=>t(o.modelValue,X.value))),ee=p((()=>W.value?o.disabledVoidIcon:o.voidIcon)),ae=p((()=>t(P.value,X.value))),le=p((()=>{const e=Array.from({length:o.max}),a=P.value;return e.fill(ae.value,0,a),e.fill(ee.value,a,o.max),e}));function oe(e){const a=W.value&&Z.value>0&&e-1<o.modelValue&&e>o.modelValue,l=o.allowHalf&&D.value&&e-.5<=P.value&&e>P.value;return a||l}function te(e){if(W.value)return;let a=P.value;const t=e.code;return t===N.up||t===N.right?(o.allowHalf?a+=.5:a+=1,e.stopPropagation(),e.preventDefault()):t!==N.left&&t!==N.down||(o.allowHalf?a-=.5:a-=1,e.stopPropagation(),e.preventDefault()),a=a<0?0:a,a=a>o.max?o.max:a,l(R,a),l("change",a),a}function ue(e,a){if(!W.value){if(o.allowHalf){let l=a.target;U(l,B.e("item"))&&(l=l.querySelector(`.${B.e("icon")}`)),(0===l.clientWidth||U(l,B.e("decimal")))&&(l=l.parentNode),D.value=2*a.offsetX<=l.clientWidth,P.value=D.value?e-.5:e}else P.value=e;$.value=e}}function se(){W.value||(o.allowHalf&&(D.value=o.modelValue!==Math.floor(o.modelValue)),P.value=o.modelValue,$.value=-1)}return b((()=>o.modelValue),(e=>{P.value=e,D.value=o.modelValue!==Math.floor(o.modelValue)})),o.modelValue||l(R,0),a({setCurrentValue:ue,resetCurrentValue:se}),(e,a)=>{var t;return V(),x("div",{id:k(E),class:S([k(O),k(B).is("disabled",k(W))]),role:"slider","aria-label":k(F)?void 0:e.label||"rating","aria-labelledby":k(F)?null==(t=k(s))?void 0:t.labelId:void 0,"aria-valuenow":P.value,"aria-valuetext":k(z)||void 0,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0",style:H(k(q)),onKeydown:te},[(V(!0),x(w,null,g(e.max,((e,a)=>(V(),x("span",{key:a,class:S(k(B).e("item")),onMousemove:a=>ue(e,a),onMouseleave:se,onClick:a=>{return t=e,void(W.value||(o.allowHalf&&D.value?(l(R,P.value),o.modelValue!==P.value&&l("change",P.value)):(l(R,t),o.modelValue!==t&&l("change",t))));var t}},[C(k(I),{class:S([k(B).e("icon"),{hover:$.value===e},k(B).is("active",e<=P.value)])},{default:T((()=>[oe(e)?_("v-if",!0):(V(),j(M(k(le)[e-1]),{key:0})),oe(e)?(V(),j(k(I),{key:1,style:H(k(Q)),class:S([k(B).e("icon"),k(B).e("decimal")])},{default:T((()=>[(V(),j(M(k(Y))))])),_:1},8,["style","class"])):_("v-if",!0)])),_:2},1032,["class"])],42,J)))),128)),e.showText||e.showScore?(V(),x("span",{key:0,class:S(k(B).e("text"))},A(k(z)),3)):_("v-if",!0)],46,G)}}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]])),L={components:{Alert:W},data:()=>({value1:null,value2:null,value3:3.7})};"function"==typeof P&&P(L);const Q=F(L,[["render",function(e,a,l,o,t,u){const s=$("Alert"),r=O,d=K,i=D;return V(),x("div",null,[C(s),C(r,{title:"评分"}),C(i,{title:"基础用法",class:"demo"},{default:T((()=>[C(d,{modelValue:t.value1,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value1=e)},null,8,["modelValue"])])),_:1}),C(i,{title:"辅助文字",class:"demo"},{default:T((()=>[C(d,{modelValue:t.value2,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value2=e),"show-text":"",texts:["极差","差","一般","好","极好"]},null,8,["modelValue"])])),_:1}),C(i,{title:"只读",class:"demo"},{default:T((()=>[C(d,{modelValue:t.value3,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value3=e),disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue"])])),_:1})])}]]);export{Q as default};
