
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{aa as r,az as u,b3 as i,ad as p,aC as c,aD as d,d as v,aS as g,aQ as f,aW as m,u as h,r as b,c as y,cF as w,cd as A,cz as $,o as S,b as k,e as x,w as _,F,h as O,i as C,f as E,E as M,n as j,bd as I,X as B,g as P,a2 as T,R as V,S as K,cf as R,k as U,a7 as W,ag as N,a1 as q,l as z,a5 as L,_ as D,aE as H,bQ as Q,t as X,q as G,A as J,Q as Y,bI as Z,c7 as ee,m as ae}from"./index.a82b8a9a.js";import{E as te}from"./el-input.20be2c8d.js";/* empty css                     */import{U as le,I as se,C as oe}from"./event.6c7ea317.js";const ne=r({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:u(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:u([Function,Array]),default:i},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:p.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1}}),re={[le]:e=>c(e),[se]:e=>c(e),[oe]:e=>c(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>d(e)},ue=["aria-expanded","aria-owns"],ie={key:0},pe=["id","aria-selected","onClick"],ce=v((de=((e,a)=>{for(var t in a||(a={}))s.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&n(e,t,a[t]);return e})({},{name:"ElAutocomplete",inheritAttrs:!1}),a(de,t({props:ne,emits:re,setup(e,{expose:a,emit:t}){const l=e,s=g(),o=f(),n=m(),r=h("autocomplete"),u=b(),i=b(),p=b(),c=b();let d=!1;const v=b([]),D=b(-1),G=b(""),J=b(!1),Y=b(!1),Z=b(!1),ee=y((()=>r.b(String(w())))),ae=y((()=>o.style)),ne=y((()=>(v.value.length>0||Z.value)&&J.value)),re=y((()=>!l.hideLoading&&Z.value)),ce=y((()=>u.value?Array.from(u.value.$el.querySelectorAll("input")):[])),de=async()=>{await H(),ne.value&&(G.value=`${u.value.$el.offsetWidth}px`)},ve=()=>{d=!0},ge=()=>{d=!1,D.value=-1},fe=A((async e=>{if(Y.value)return;const a=e=>{Z.value=!1,Y.value||(Q(e)?(v.value=e,D.value=l.highlightFirstItem?0:-1):X("ElAutocomplete","autocomplete suggestions must be an array"))};if(Z.value=!0,Q(l.fetchSuggestions))a(l.fetchSuggestions);else{const t=await l.fetchSuggestions(e,a);Q(t)&&a(t)}}),l.debounce),me=e=>{const a=!!e;if(t(se,e),t(le,e),Y.value=!1,J.value||(J.value=a),!l.triggerOnFocus&&!e)return Y.value=!0,void(v.value=[]);fe(e)},he=e=>{var a;n.value||("INPUT"!==(null==(a=e.target)?void 0:a.tagName)||ce.value.includes(document.activeElement))&&(J.value=!0)},be=e=>{t(oe,e)},ye=e=>{d||(J.value=!0,t("focus",e),l.triggerOnFocus&&fe(String(l.modelValue)))},we=e=>{d||t("blur",e)},Ae=()=>{J.value=!1,t(le,""),t("clear")},$e=async()=>{ne.value&&D.value>=0&&D.value<v.value.length?xe(v.value[D.value]):l.selectWhenUnmatched&&(t("select",{value:l.modelValue}),v.value=[],D.value=-1)},Se=e=>{ne.value&&(e.preventDefault(),e.stopPropagation(),ke())},ke=()=>{J.value=!1},xe=async e=>{t(se,e[l.valueKey]),t(le,e[l.valueKey]),t("select",e),v.value=[],D.value=-1},_e=e=>{if(!ne.value||Z.value)return;if(e<0)return void(D.value=-1);e>=v.value.length&&(e=v.value.length-1);const a=i.value.querySelector(`.${r.be("suggestion","wrap")}`),t=a.querySelectorAll(`.${r.be("suggestion","list")} li`)[e],l=a.scrollTop,{offsetTop:s,scrollHeight:o}=t;s+o>l+a.clientHeight&&(a.scrollTop+=o),s<l&&(a.scrollTop-=o),D.value=e,u.value.ref.setAttribute("aria-activedescendant",`${ee.value}-item-${D.value}`)};return $(c,(()=>{ne.value&&ke()})),S((()=>{u.value.ref.setAttribute("role","textbox"),u.value.ref.setAttribute("aria-autocomplete","list"),u.value.ref.setAttribute("aria-controls","id"),u.value.ref.setAttribute("aria-activedescendant",`${ee.value}-item-${D.value}`)})),a({highlightedIndex:D,activated:J,loading:Z,inputRef:u,popperRef:p,suggestions:v,handleSelect:xe,handleKeyEnter:$e,focus:()=>{var e;null==(e=u.value)||e.focus()},blur:()=>{var e;null==(e=u.value)||e.blur()},close:ke,highlight:_e}),(e,a)=>(k(),x(C(L),{ref_key:"popperRef",ref:p,visible:C(ne),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[C(r).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${C(r).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:de,onShow:ve,onHide:ge},{content:_((()=>[F("div",{ref_key:"regionRef",ref:i,class:j([C(r).b("suggestion"),C(r).is("loading",C(re))]),style:U({[e.fitInputWidth?"width":"minWidth"]:G.value,outline:"none"}),role:"region"},[O(C(R),{id:C(ee),tag:"ul","wrap-class":C(r).be("suggestion","wrap"),"view-class":C(r).be("suggestion","list"),role:"listbox"},{default:_((()=>[C(re)?(k(),E("li",ie,[O(C(M),{class:j(C(r).is("loading"))},{default:_((()=>[O(C(I))])),_:1},8,["class"])])):(k(!0),E(K,{key:1},B(v.value,((a,t)=>(k(),E("li",{id:`${C(ee)}-item-${t}`,key:t,class:j({highlighted:D.value===t}),role:"option","aria-selected":D.value===t,onClick:e=>xe(a)},[P(e.$slots,"default",{item:a},(()=>[T(V(a[e.valueKey]),1)]))],10,pe)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:_((()=>[F("div",{ref_key:"listboxRef",ref:c,class:j([C(r).b(),e.$attrs.class]),style:U(C(ae)),role:"combobox","aria-haspopup":"listbox","aria-expanded":C(ne),"aria-owns":C(ee)},[O(C(te),N({ref_key:"inputRef",ref:u},C(s),{"model-value":e.modelValue,onInput:me,onChange:be,onFocus:ye,onBlur:we,onClear:Ae,onKeydown:[a[0]||(a[0]=q(z((e=>_e(D.value-1)),["prevent"]),["up"])),a[1]||(a[1]=q(z((e=>_e(D.value+1)),["prevent"]),["down"])),q($e,["enter"]),q(ke,["tab"]),q(Se,["esc"])],onMousedown:he}),W({_:2},[e.$slots.prepend?{name:"prepend",fn:_((()=>[P(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:_((()=>[P(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:_((()=>[P(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:_((()=>[P(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,ue)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}}))));var de;const ve=G(D(ce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));const ge={class:"map"},fe={class:"search-name"},me=["title"],he=v({name:"AmapMarker"});var be=J(Object.assign(he,{props:{v:{type:String,default:"1.4.15"},appkey:{type:String,default:""},height:{type:[Number,String],default:500},lnglat:{type:Array,default:()=>[]}},emits:["update:lnglat"],setup(e,{emit:a}){const t=e,l=b("");let s="",o="",n="";const r=y((()=>"string"==typeof t.height?t.height:`${t.height}px`));function u(){s=new AMap.Map("amap",{zoom:12}),AMap.plugin("AMap.ToolBar",(()=>{let e=new AMap.ToolBar;s.addControl(e)})),o=new AMap.Marker({draggable:!0,cursor:"move"}),o.on("dragend",(e=>{a("update:lnglat",[e.lnglat.lng,e.lnglat.lat])})),n=new AMap.Autocomplete,s.on("click",(e=>{i(e.lnglat.getLng(),e.lnglat.getLat())})),2==t.lnglat.length&&i(t.lnglat[0],t.lnglat[1])}function i(e,t){s.remove(o),o.setPosition([e,t]),s.add(o),s.setFitView(),a("update:lnglat",[e,t])}function p(e,a){n.search(e,((e,t)=>{a(t.tips)}))}function c(e){l.value=e.name,e.location?i(e.location.lng,e.location.lat):s.setCity(e.adcode)}return S((()=>{if("undefined"==typeof AMap){let e=document.createElement("script");e.charset="UTF-8",e.src=`https://webapi.amap.com/maps?v=${t.v}&key=${t.appkey}&plugin=AMap.Autocomplete`,document.head.appendChild(e),e.onload=()=>{u()}}else H((()=>{u()}))})),(e,a)=>{const t=Y,s=M,o=ve;return k(),E("div",ge,[O(o,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),class:"search","fetch-suggestions":p,"trigger-on-focus":!1,clearable:"",placeholder:"请输入地址关键字",onSelect:c},{prefix:_((()=>[O(s,{class:"el-input__icon"},{default:_((()=>[O(t,{name:"i-ep:location-information"})])),_:1})])),default:_((({item:e})=>[F("div",fe,V(e.name),1),F("span",{class:"search-address",title:e.district+e.address},V(e.district+e.address),9,me)])),_:1},8,["modelValue"]),F("div",{id:"amap",style:U(`height:${C(r)};`)},null,4)])}}}),[["__scopeId","data-v-63cdee0a"]]);const ye={name:"ComponentExampleAmap",props:{},data:()=>({lnglat:[120.068384,30.290939]}),created(){},mounted(){},methods:{}};"function"==typeof Z&&Z(ye);var we=J(ye,[["render",function(e,a,t,l,s,o){const n=be,r=ee;return k(),E("div",null,[O(r,null,{default:_((()=>[F("div",null,"经纬度："+V(s.lnglat),1),ae(" 注意这里替换高德地图的appkey "),O(n,{lnglat:s.lnglat,"onUpdate:lnglat":a[0]||(a[0]=e=>s.lnglat=e),appkey:"8f7844cc502e17bb549c04c9aaadaf94",height:600},null,8,["lnglat"])])),_:1})])}]]);export{we as default};
