
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{aa as r,az as u,b3 as i,ad as p,aC as c,aD as d,d as v,aS as g,aQ as f,aW as m,u as h,r as b,c as y,cE as w,cd as A,cz as $,o as S,b as k,e as x,w as _,F as E,h as O,i as C,f as F,E as M,n as j,bd as I,X as B,g as P,a2 as T,R as U,S as V,cf as K,k as R,a7 as N,ag as W,a1 as q,l as z,b9 as L,a5 as D,_ as H,aE as Q,bQ as X,t as G,q as J,A as Y,Q as Z,bI as ee,c7 as ae,m as te}from"./index.8029e3e3.js";import{E as le}from"./el-input.636fea0c.js";/* empty css                     */import{U as se,I as oe,C as ne}from"./event.a088884a.js";const re=r({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:u(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:u([Function,Array]),default:i},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:p.teleported,highlightFirstItem:{type:Boolean,default:!1}}),ue={[se]:e=>c(e),[oe]:e=>c(e),[ne]:e=>c(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>d(e)},ie=["aria-expanded","aria-owns"],pe={key:0},ce=["id","aria-selected","onClick"],de=v((ve=((e,a)=>{for(var t in a||(a={}))s.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&n(e,t,a[t]);return e})({},{name:"ElAutocomplete",inheritAttrs:!1}),a(ve,t({props:re,emits:ue,setup(e,{expose:a,emit:t}){const l=e,s=g(),o=f(),n=m(),r=h("autocomplete"),u=b(),i=b(),p=b(),c=b();let d=!1;const v=b([]),H=b(-1),J=b(""),Y=b(!1),Z=b(!1),ee=b(!1),ae=y((()=>r.b(String(w())))),te=y((()=>o.style)),re=y((()=>(v.value.length>0||ee.value)&&Y.value)),ue=y((()=>!l.hideLoading&&ee.value)),de=y((()=>u.value?Array.from(u.value.$el.querySelectorAll("input")):[])),ve=async()=>{await Q(),re.value&&(J.value=`${u.value.$el.offsetWidth}px`)},ge=()=>{d=!0},fe=()=>{d=!1,H.value=-1},me=A((async e=>{if(Z.value)return;const a=e=>{ee.value=!1,Z.value||(X(e)?(v.value=e,H.value=l.highlightFirstItem?0:-1):G("ElAutocomplete","autocomplete suggestions must be an array"))};if(ee.value=!0,X(l.fetchSuggestions))a(l.fetchSuggestions);else{const t=await l.fetchSuggestions(e,a);X(t)&&a(t)}}),l.debounce),he=e=>{const a=!!e;if(t(oe,e),t(se,e),Z.value=!1,Y.value||(Y.value=a),!l.triggerOnFocus&&!e)return Z.value=!0,void(v.value=[]);me(e)},be=e=>{var a;n.value||("INPUT"!==(null==(a=e.target)?void 0:a.tagName)||de.value.includes(document.activeElement))&&(Y.value=!0)},ye=e=>{t(ne,e)},we=e=>{d||(Y.value=!0,t("focus",e),l.triggerOnFocus&&me(String(l.modelValue)))},Ae=e=>{d||t("blur",e)},$e=()=>{Y.value=!1,t(se,""),t("clear")},Se=async()=>{re.value&&H.value>=0&&H.value<v.value.length?_e(v.value[H.value]):l.selectWhenUnmatched&&(t("select",{value:l.modelValue}),v.value=[],H.value=-1)},ke=e=>{re.value&&(e.preventDefault(),e.stopPropagation(),xe())},xe=()=>{Y.value=!1},_e=async e=>{t(oe,e[l.valueKey]),t(se,e[l.valueKey]),t("select",e),v.value=[],H.value=-1},Ee=e=>{if(!re.value||ee.value)return;if(e<0)return void(H.value=-1);e>=v.value.length&&(e=v.value.length-1);const a=i.value.querySelector(`.${r.be("suggestion","wrap")}`),t=a.querySelectorAll(`.${r.be("suggestion","list")} li`)[e],l=a.scrollTop,{offsetTop:s,scrollHeight:o}=t;s+o>l+a.clientHeight&&(a.scrollTop+=o),s<l&&(a.scrollTop-=o),H.value=e,u.value.ref.setAttribute("aria-activedescendant",`${ae.value}-item-${H.value}`)};return $(c,(()=>{re.value&&xe()})),S((()=>{u.value.ref.setAttribute("role","textbox"),u.value.ref.setAttribute("aria-autocomplete","list"),u.value.ref.setAttribute("aria-controls","id"),u.value.ref.setAttribute("aria-activedescendant",`${ae.value}-item-${H.value}`)})),a({highlightedIndex:H,activated:Y,loading:ee,inputRef:u,popperRef:p,suggestions:v,handleSelect:_e,handleKeyEnter:Se,focus:()=>{var e;null==(e=u.value)||e.focus()},blur:()=>{var e;null==(e=u.value)||e.blur()},close:xe,highlight:Ee}),(e,a)=>(k(),x(C(D),{ref_key:"popperRef",ref:p,visible:C(re),"onUpdate:visible":a[2]||(a[2]=e=>L(re)?re.value=e:null),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[C(r).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${C(r).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:ve,onShow:ge,onHide:fe},{content:_((()=>[E("div",{ref_key:"regionRef",ref:i,class:j([C(r).b("suggestion"),C(r).is("loading",C(ue))]),style:R({minWidth:J.value,outline:"none"}),role:"region"},[O(C(K),{id:C(ae),tag:"ul","wrap-class":C(r).be("suggestion","wrap"),"view-class":C(r).be("suggestion","list"),role:"listbox"},{default:_((()=>[C(ue)?(k(),F("li",pe,[O(C(M),{class:j(C(r).is("loading"))},{default:_((()=>[O(C(I))])),_:1},8,["class"])])):(k(!0),F(V,{key:1},B(v.value,((a,t)=>(k(),F("li",{id:`${C(ae)}-item-${t}`,key:t,class:j({highlighted:H.value===t}),role:"option","aria-selected":H.value===t,onClick:e=>_e(a)},[P(e.$slots,"default",{item:a},(()=>[T(U(a[e.valueKey]),1)]))],10,ce)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:_((()=>[E("div",{ref_key:"listboxRef",ref:c,class:j([C(r).b(),e.$attrs.class]),style:R(C(te)),role:"combobox","aria-haspopup":"listbox","aria-expanded":C(re),"aria-owns":C(ae)},[O(C(le),W({ref_key:"inputRef",ref:u},C(s),{"model-value":e.modelValue,onInput:he,onChange:ye,onFocus:we,onBlur:Ae,onClear:$e,onKeydown:[a[0]||(a[0]=q(z((e=>Ee(H.value-1)),["prevent"]),["up"])),a[1]||(a[1]=q(z((e=>Ee(H.value+1)),["prevent"]),["down"])),q(Se,["enter"]),q(xe,["tab"]),q(ke,["esc"])],onMousedown:be}),N({_:2},[e.$slots.prepend?{name:"prepend",fn:_((()=>[P(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:_((()=>[P(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:_((()=>[P(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:_((()=>[P(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,ie)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}}))));var ve;const ge=J(H(de,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));const fe={class:"map"},me={class:"search-name"},he=["title"],be=v({name:"AmapMarker"});var ye=Y(Object.assign(be,{props:{v:{type:String,default:"1.4.15"},appkey:{type:String,default:""},height:{type:[Number,String],default:500},lnglat:{type:Array,default:()=>[]}},emits:["update:lnglat"],setup(e,{emit:a}){const t=e,l=b("");let s="",o="",n="";const r=y((()=>"string"==typeof t.height?t.height:`${t.height}px`));function u(){s=new AMap.Map("amap",{zoom:12}),AMap.plugin("AMap.ToolBar",(()=>{let e=new AMap.ToolBar;s.addControl(e)})),o=new AMap.Marker({draggable:!0,cursor:"move"}),o.on("dragend",(e=>{a("update:lnglat",[e.lnglat.lng,e.lnglat.lat])})),n=new AMap.Autocomplete,s.on("click",(e=>{i(e.lnglat.getLng(),e.lnglat.getLat())})),2==t.lnglat.length&&i(t.lnglat[0],t.lnglat[1])}function i(e,t){s.remove(o),o.setPosition([e,t]),s.add(o),s.setFitView(),a("update:lnglat",[e,t])}function p(e,a){n.search(e,((e,t)=>{a(t.tips)}))}function c(e){l.value=e.name,e.location?i(e.location.lng,e.location.lat):s.setCity(e.adcode)}return S((()=>{if("undefined"==typeof AMap){let e=document.createElement("script");e.charset="UTF-8",e.src=`https://webapi.amap.com/maps?v=${t.v}&key=${t.appkey}&plugin=AMap.Autocomplete`,document.head.appendChild(e),e.onload=()=>{u()}}else Q((()=>{u()}))})),(e,a)=>{const t=Z,s=M,o=ge;return k(),F("div",fe,[O(o,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),class:"search","fetch-suggestions":p,"trigger-on-focus":!1,clearable:"",placeholder:"请输入地址关键字",onSelect:c},{prefix:_((()=>[O(s,{class:"el-input__icon"},{default:_((()=>[O(t,{name:"i-ep:location-information"})])),_:1})])),default:_((({item:e})=>[E("div",me,U(e.name),1),E("span",{class:"search-address",title:e.district+e.address},U(e.district+e.address),9,he)])),_:1},8,["modelValue"]),E("div",{id:"amap",style:R(`height:${C(r)};`)},null,4)])}}}),[["__scopeId","data-v-63cdee0a"]]);const we={name:"ComponentExampleAmap",props:{},data:()=>({lnglat:[120.068384,30.290939]}),created(){},mounted(){},methods:{}};"function"==typeof ee&&ee(we);var Ae=Y(we,[["render",function(e,a,t,l,s,o){const n=ye,r=ae;return k(),F("div",null,[O(r,null,{default:_((()=>[E("div",null,"经纬度："+U(s.lnglat),1),te(" 注意这里替换高德地图的appkey "),O(n,{lnglat:s.lnglat,"onUpdate:lnglat":a[0]||(a[0]=e=>s.lnglat=e),appkey:"8f7844cc502e17bb549c04c9aaadaf94",height:600},null,8,["lnglat"])])),_:1})])}]]);export{Ae as default};
