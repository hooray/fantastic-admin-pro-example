
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(a,l,o)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[l]=o;import{aa as u,az as d,aA as i,cB as n,aL as v,cC as c,aO as m,d as f,W as p,bR as b,bT as y,aV as h,u as V,aU as x,r as w,c as g,bQ as j,aD as S,y as O,b as k,f as C,S as T,X as I,n as A,i as H,h as M,w as _,e as B,N as P,m as N,k as D,E as U,R as E,_ as $,ao as R,ar as W,q,A as z,bI as F,M as L,c7 as X,c6 as K}from"./index.d45ed42d.js";import Q from"./alert.d8e1a1d6.js";import{i as G}from"./validator.ad7588b1.js";import{C as J,U as Y}from"./event.6c7ea317.js";import"./el-alert.24a2fcb4.js";import"./el-link.3ffa9be7.js";const Z=u({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:d([Array,Object]),default:()=>i(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:d([Array,Object]),default:()=>[n,n,n]},voidIcon:{type:v,default:()=>c},disabledVoidIcon:{type:v,default:()=>n},disabled:{type:Boolean},allowHalf:{type:Boolean},showText:{type:Boolean},showScore:{type:Boolean},textColor:{type:String,default:""},texts:{type:d(Array),default:()=>i(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:G},label:{type:String,default:void 0}}),ee={[J]:e=>m(e),[Y]:e=>m(e)},ae=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],le=["onMousemove","onClick"],oe=f((te=((e,a)=>{for(var l in a||(a={}))t.call(a,l)&&s(e,l,a[l]);if(o)for(var l of o(a))r.call(a,l)&&s(e,l,a[l]);return e})({},{name:"ElRate"}),re={props:Z,emits:ee,setup(e,{expose:a,emit:l}){const o=e;function t(e,a){const l=e=>S(e),o=Object.keys(a).map((e=>+e)).filter((o=>{const t=a[o];return l(t)&&t.excluded?e<o:e<=o})).sort(((e,a)=>e-a)),t=a[o[0]];return l(t)&&t.value||t}const r=p(b,void 0),s=p(y,void 0),u=h(),d=V("rate"),{inputId:i,isLabeledByFormItem:n}=x(o,{formItemContext:s}),v=w(o.modelValue),c=w(-1),m=w(!0),f=g((()=>[d.b(),d.m(u.value)])),$=g((()=>o.disabled||(null==r?void 0:r.disabled))),q=g((()=>d.cssVarBlock({"void-color":o.voidColor,"disabled-void-color":o.disabledVoidColor,"fill-color":X.value}))),z=g((()=>{let e="";return o.showScore?e=o.scoreTemplate.replace(/\{\s*value\s*\}/,$.value?`${o.modelValue}`:`${v.value}`):o.showText&&(e=o.texts[Math.ceil(v.value)-1]),e})),F=g((()=>100*o.modelValue-100*Math.floor(o.modelValue))),L=g((()=>j(o.colors)?{[o.lowThreshold]:o.colors[0],[o.highThreshold]:{value:o.colors[1],excluded:!0},[o.max]:o.colors[2]}:o.colors)),X=g((()=>{const e=t(v.value,L.value);return S(e)?"":e})),K=g((()=>{let e="";return $.value?e=`${F.value}%`:o.allowHalf&&(e="50%"),{color:X.value,width:e}})),Q=g((()=>j(o.icons)?{[o.lowThreshold]:o.icons[0],[o.highThreshold]:{value:o.icons[1],excluded:!0},[o.max]:o.icons[2]}:o.icons)),G=g((()=>t(o.modelValue,Q.value))),J=g((()=>$.value?o.disabledVoidIcon:o.voidIcon)),Z=g((()=>t(v.value,Q.value))),ee=g((()=>{const e=Array.from({length:o.max}),a=v.value;return e.fill(Z.value,0,a),e.fill(J.value,a,o.max),e}));function oe(e){const a=$.value&&F.value>0&&e-1<o.modelValue&&e>o.modelValue,l=o.allowHalf&&m.value&&e-.5<=v.value&&e>v.value;return a||l}function te(e){if($.value)return;let a=v.value;const t=e.code;return t===R.up||t===R.right?(o.allowHalf?a+=.5:a+=1,e.stopPropagation(),e.preventDefault()):t!==R.left&&t!==R.down||(o.allowHalf?a-=.5:a-=1,e.stopPropagation(),e.preventDefault()),a=a<0?0:a,a=a>o.max?o.max:a,l(Y,a),l("change",a),a}function re(e,a){if(!$.value){if(o.allowHalf){let l=a.target;W(l,d.e("item"))&&(l=l.querySelector(`.${d.e("icon")}`)),(0===l.clientWidth||W(l,d.e("decimal")))&&(l=l.parentNode),m.value=2*a.offsetX<=l.clientWidth,v.value=m.value?e-.5:e}else v.value=e;c.value=e}}function se(){$.value||(o.allowHalf&&(m.value=o.modelValue!==Math.floor(o.modelValue)),v.value=o.modelValue,c.value=-1)}return O((()=>o.modelValue),(e=>{v.value=e,m.value=o.modelValue!==Math.floor(o.modelValue)})),o.modelValue||l(Y,0),a({setCurrentValue:re,resetCurrentValue:se}),(e,a)=>(k(),C("div",{id:H(i),class:A([H(f),H(d).is("disabled",H($))]),role:"slider","aria-label":H(n)?void 0:e.label||"rating","aria-labelledby":H(n)?H(s).labelId:void 0,"aria-valuenow":v.value,"aria-valuetext":H(z)||void 0,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0",style:D(H(q)),onKeydown:te},[(k(!0),C(T,null,I(e.max,((e,a)=>(k(),C("span",{key:a,class:A(H(d).e("item")),onMousemove:a=>re(e,a),onMouseleave:se,onClick:a=>{return t=e,void($.value||(o.allowHalf&&m.value?(l(Y,v.value),o.modelValue!==v.value&&l("change",v.value)):(l(Y,t),o.modelValue!==t&&l("change",t))));var t}},[M(H(U),{class:A([H(d).e("icon"),{hover:c.value===e},H(d).is("active",e<=v.value)])},{default:_((()=>[oe(e)?N("v-if",!0):(k(),B(P(H(ee)[e-1]),{key:0})),oe(e)?(k(),B(H(U),{key:1,style:D(H(K)),class:A([H(d).e("icon"),H(d).e("decimal")])},{default:_((()=>[(k(),B(P(H(G))))])),_:1},8,["style","class"])):N("v-if",!0)])),_:2},1032,["class"])],42,le)))),128)),e.showText||e.showScore?(k(),C("span",{key:0,class:A(H(d).e("text"))},E(H(z)),3)):N("v-if",!0)],46,ae))}},a(te,l(re))));var te,re;const se=q($(oe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]));const ue={components:{Alert:Q},data:()=>({value1:null,value2:null,value3:3.7})};"function"==typeof F&&F(ue);var de=z(ue,[["render",function(e,a,l,o,t,r){const s=L("Alert"),u=K,d=se,i=X;return k(),C("div",null,[M(s),M(u,{title:"评分"}),M(i,{title:"基础用法",class:"demo"},{default:_((()=>[M(d,{modelValue:t.value1,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value1=e)},null,8,["modelValue"])])),_:1}),M(i,{title:"辅助文字",class:"demo"},{default:_((()=>[M(d,{modelValue:t.value2,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value2=e),"show-text":"",texts:["极差","差","一般","好","极好"]},null,8,["modelValue"])])),_:1}),M(i,{title:"只读",class:"demo"},{default:_((()=>[M(d,{modelValue:t.value3,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value3=e),disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue"])])),_:1})])}]]);export{de as default};
