
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{cI as e,bW as n,a9 as a,aw as t,d as r,b6 as l,u as s,W as o,c as i,r as u,b as c,f as p,J as d,n as m,i as f,R as v,h as b,m as g,_ as h,cv as k,bX as w,al as S,H as y,af as A}from"./index.252503d3.js";import{d as V,u as _,f as O,g as R,h as x,c as C,t as E,T,i as I,C as D}from"./panel-time-pick.4c59ee3e.js";import{b as P}from"./_baseFlatten.61e5e347.js";import{a as j,m as H,p as M,q as B,r as q}from"./isEqual.30ea9237.js";function F(e){return e}function K(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}var U=Date.now;var W=e?function(n,a){return e(n,"toString",{configurable:!0,enumerable:!1,value:(t=a,function(){return t}),writable:!0});var t}:F;var J,X,$;const z=(J=W,X=0,$=0,function(){var e=U(),n=16-(e-$);if($=e,n>0){if(++X>=800)return arguments[0]}else X=0;return J.apply(void 0,arguments)});function G(e){return e!=e}function L(e,n){return!!(null==e?0:e.length)&&function(e,n,a){return n==n?function(e,n,a){for(var t=a-1,r=e.length;++t<r;)if(e[t]===n)return t;return-1}(e,n,a):function(e,n,a,t){for(var r=e.length,l=a+(t?1:-1);t?l--:++l<r;)if(n(e[l],l,e))return l;return-1}(e,G,a)}(e,n,0)>-1}var N=Math.max;function Q(e){return n(e)&&j(e)}function Y(e,n,a){for(var t=-1,r=null==e?0:e.length;++t<r;)if(a(n,e[t]))return!0;return!1}const Z=H&&1/M(new H([,-0]))[1]==1/0?function(e){return new H(e)}:function(){};var ee=function(e,n){return z(function(e,n,a){return n=N(void 0===n?e.length-1:n,0),function(){for(var t=arguments,r=-1,l=N(t.length-n,0),s=Array(l);++r<l;)s[r]=t[n+r];r=-1;for(var o=Array(n+1);++r<n;)o[r]=t[r];return o[n]=a(s),K(e,this,o)}}(e,n,F),e+"")}((function(e){return function(e,n,a){var t=-1,r=L,l=e.length,s=!0,o=[],i=o;if(a)s=!1,r=Y;else if(l>=200){var u=n?null:Z(e);if(u)return M(u);s=!1,r=q,i=new B}else i=n?[]:o;e:for(;++t<l;){var c=e[t],p=n?n(c):c;if(c=a||0!==c?c:0,s&&p==p){for(var d=i.length;d--;)if(i[d]===p)continue e;n&&i.push(p),o.push(c)}else r(i,p,a)||(i!==o&&i.push(p),o.push(c))}return o}(P(e,1,Q,!0))}));const ne=ee,ae=a({...V,parsedValue:{type:t(Array)}}),te=["disabled"];var re=h(r({__name:"panel-time-range",props:ae,emits:["pick","select-range","set-picker-option"],setup(e,{emit:n}){const a=e,t=(e,n)=>{const a=[];for(let t=e;t<=n;t++)a.push(t);return a},{t:r,lang:h}=l(),y=s("time"),A=s("picker"),V=o("EP_PICKER_BASE"),{arrowControl:C,disabledHours:E,disabledMinutes:T,disabledSeconds:I,defaultValue:D}=V.props,P=i((()=>a.parsedValue[0])),j=i((()=>a.parsedValue[1])),H=_(a),M=i((()=>a.format.includes("ss"))),B=i((()=>a.format.includes("A")?"A":a.format.includes("a")?"a":"")),q=e=>{K(e.millisecond(0),j.value)},F=e=>{K(P.value,e.millisecond(0))},K=(e,a)=>{n("pick",[e,a],!0)},U=i((()=>P.value>j.value)),W=u([0,2]),J=(e,a)=>{n("select-range",e,a,"min"),W.value=[e,a]},X=i((()=>M.value?11:8)),$=(e,a)=>{n("select-range",e,a,"max");const t=f(X);W.value=[e+t,a+t]},z=(e,n)=>{const a=E?E(e):[],r="start"===e,l=(n||(r?j.value:P.value)).hour(),s=r?t(l+1,23):t(0,l-1);return ne(a,s)},G=(e,n,a)=>{const r=T?T(e,n):[],l="start"===n,s=a||(l?j.value:P.value);if(e!==s.hour())return r;const o=s.minute(),i=l?t(o+1,59):t(0,o-1);return ne(r,i)},L=(e,n,a,r)=>{const l=I?I(e,n,a):[],s="start"===a,o=r||(s?j.value:P.value),i=o.hour(),u=o.minute();if(e!==i||n!==u)return l;const c=o.second(),p=s?t(c+1,59):t(0,c-1);return ne(l,p)},N=([e,n])=>[ae(e,"start",!0,n),ae(n,"end",!1,e)],{getAvailableHours:Q,getAvailableMinutes:Y,getAvailableSeconds:Z}=O(z,G,L),{timePickerOptions:ee,getAvailableTime:ae,onSetOption:re}=R({getAvailableHours:Q,getAvailableMinutes:Y,getAvailableSeconds:Z});return n("set-picker-option",["formatToString",e=>e?w(e)?e.map((e=>e.format(a.format))):e.format(a.format):null]),n("set-picker-option",["parseUserInput",e=>e?w(e)?e.map((e=>k(e,a.format).locale(h.value))):k(e,a.format).locale(h.value):null]),n("set-picker-option",["isValidValue",e=>{const n=e.map((e=>k(e).locale(h.value))),a=N(n);return n[0].isSame(a[0])&&n[1].isSame(a[1])}]),n("set-picker-option",["handleKeydownInput",e=>{const n=e.code,{left:a,right:t,up:r,down:l}=S;if([a,t].includes(n)){return(e=>{const n=M.value?[0,3,6,11,14,17]:[0,3,8,11],a=["hours","minutes"].concat(M.value?["seconds"]:[]),t=(n.indexOf(W.value[0])+e+n.length)%n.length,r=n.length/2;t<r?ee.start_emitSelectRange(a[t]):ee.end_emitSelectRange(a[t-r])})(n===a?-1:1),void e.preventDefault()}if([r,l].includes(n)){const a=n===r?-1:1,t=W.value[0]<X.value?"start":"end";return ee[`${t}_scrollDown`](a),void e.preventDefault()}}]),n("set-picker-option",["getDefaultValue",()=>{if(w(D))return D.map((e=>k(e).locale(h.value)));const e=k(D).locale(h.value);return[e,e.add(60,"m")]}]),n("set-picker-option",["getRangeAvailableTime",N]),(e,a)=>e.actualVisible?(c(),p("div",{key:0,class:m([f(y).b("range-picker"),f(A).b("panel")])},[d("div",{class:m(f(y).be("range-picker","content"))},[d("div",{class:m(f(y).be("range-picker","cell"))},[d("div",{class:m(f(y).be("range-picker","header"))},v(f(r)("el.datepicker.startTime")),3),d("div",{class:m([f(y).be("range-picker","body"),f(y).be("panel","content"),f(y).is("arrow",f(C)),{"has-seconds":f(M)}])},[b(x,{ref:"minSpinner",role:"start","show-seconds":f(M),"am-pm-mode":f(B),"arrow-control":f(C),"spinner-date":f(P),"disabled-hours":z,"disabled-minutes":G,"disabled-seconds":L,onChange:q,onSetOption:f(re),onSelectRange:J},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),d("div",{class:m(f(y).be("range-picker","cell"))},[d("div",{class:m(f(y).be("range-picker","header"))},v(f(r)("el.datepicker.endTime")),3),d("div",{class:m([f(y).be("range-picker","body"),f(y).be("panel","content"),f(y).is("arrow",f(C)),{"has-seconds":f(M)}])},[b(x,{ref:"maxSpinner",role:"end","show-seconds":f(M),"am-pm-mode":f(B),"arrow-control":f(C),"spinner-date":f(j),"disabled-hours":z,"disabled-minutes":G,"disabled-seconds":L,onChange:F,onSetOption:f(re),onSelectRange:$},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),d("div",{class:m(f(y).be("panel","footer"))},[d("button",{type:"button",class:m([f(y).be("panel","btn"),"cancel"]),onClick:a[0]||(a[0]=e=>{n("pick",H.value,!1)})},v(f(r)("el.datepicker.cancel")),3),d("button",{type:"button",class:m([f(y).be("panel","btn"),"confirm"]),disabled:f(U),onClick:a[1]||(a[1]=e=>((e=!1)=>{n("pick",[P.value,j.value],e)})())},v(f(r)("el.datepicker.confirm")),11,te)],2)],2)):g("v-if",!0)}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);k.extend(C);const le=r({name:"ElTimePicker",install:null,props:{...E,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,n){const a=u(),[t,r]=e.isRange?["timerange",re]:["time",T],l=e=>n.emit("update:modelValue",e);return y("ElPopperOptions",e.popperOptions),n.expose({focus:e=>{var n;null==(n=a.value)||n.handleFocusInput(e)},blur:e=>{var n;null==(n=a.value)||n.handleBlurInput(e)}}),()=>{var n;const s=null!=(n=e.format)?n:I;return b(D,A(e,{ref:a,type:t,format:s,"onUpdate:modelValue":l}),{default:e=>b(r,e,null)})}}});le.install=e=>{e.component(le.name,le)};const se=le;export{se as E};
