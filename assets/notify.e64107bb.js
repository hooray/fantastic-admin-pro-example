
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{r as t,E as i,a7 as e,f as o,h as n,w as s,bP as l,bQ as a,bR as c,b as r,Y as d,a4 as u,L as h}from"./index.3b0b287f.js";
/*!
 * @wcjiang/notify v2.1.0
 * JS achieve the browser title flashing , scrolling, voice prompts , chrome notice.
 * 
 * Copyright (c) 2022 kenny wang
 * http://jaywcjlove.github.io/iNotify
 * 
 * Licensed under the MIT license.
 */window.Notification&&"granted"!==window.Notification.permission&&window.Notification.requestPermission();let f="";const m=["flash","scroll"],v={title:"iNotify !",body:"You have a new message.",openurl:""};function p(t){const i=document.createElement("audio");let e;if(i.autoplay=!0,i.muted=!0,n=t,"[object Array]"===Object.prototype.toString.call(n)&&t.length>0)for(let s=0;s<t.length;s++)e=document.createElement("source"),e.src=t[s],e.type=`audio/${o=t[s],o.match(/\.([^\\.]+)$/)[1]}`,i.appendChild(e);else i.src=t;var o,n;return i}function y(t,i){const e=document.createElement("canvas"),o=document.getElementsByTagName("head")[0],n=document.createElement("link");let s=null;return e.height=32,e.width=32,s=e.getContext("2d"),s.fillStyle=i.backgroundColor,s.fillRect(0,0,32,32),s.textAlign="center",s.font='22px "helvetica", sans-serif',s.fillStyle=i.textColor,t&&s.fillText(t,16,24),n.setAttribute("rel","shortcut icon"),n.setAttribute("type","image/x-icon"),n.setAttribute("id",`new${i.id}`),n.setAttribute("href",e.toDataURL("image/png")),f=e.toDataURL("image/png"),o.appendChild(n)}function b(t){t&&this.init(t)}b.prototype={init(t){return t||(t={}),this.interval=t.interval||100,this.effect=t.effect||"flash",this.title=t.title||document.title,this.message=t.message||this.title,this.onclick=t.onclick||this.onclick,this.openurl=t.openurl||this.openurl,this.disableFavicon=t.disableFavicon||!1,this.updateFavicon=!this.disableFavicon&&(t.updateFavicon||{id:"favicon",textColor:"#fff",backgroundColor:"#2F9A00"}),this.audio=t.audio||"",this.favicon=!this.disableFavicon&&function(t){let i=document.querySelectorAll("link[rel~=shortcut]")[0];return i||(i=y("O",t)),i}(this.updateFavicon),this.cloneFavicon=this.favicon&&this.favicon.cloneNode(!0),f=t.notification&&t.notification.icon?t.notification.icon:t.icon?t.icon:this.favicon.href,v.icon=f,this.notification=t.notification||v,this.audio&&this.audio.file&&this.setURL(this.audio.file),this},render(){if("flash"===this.effect)document.title=this.title===document.title?this.message:this.title;else if("scroll"===this.effect){const t=this.message||document.title;this.scrollTitle&&this.scrollTitle.slice(1)?(this.scrollTitle=this.scrollTitle.slice(1),document.title=this.scrollTitle):(document.title=t,this.scrollTitle=t)}return this},setTitle(t){if(!0===t){if(m.indexOf(this.effect)>=0)return this.addTimer()}else t?(this.message=t,this.scrollTitle="",this.addTimer()):this.clearTimer();return this},setURL(t){return t&&(this.audioElm&&this.audioElm.remove(),this.audioElm=p(t),document.body.appendChild(this.audioElm)),this},loopPlay(){return this.setURL(),this.audioElm.loop=!0,this.player(),this},stopPlay(){return this.audioElm&&(this.audioElm.loop=!1,this.audioElm.pause()),this},player(){if(!this.audio||!this.audio.file)return;this.audioElm||(this.audioElm=p(this.audio.file),document.body.appendChild(this.audioElm)),this.audioElm.muted=!1;const t=this.audioElm.play();return void 0!==t&&t.then((()=>{})).catch((()=>{})),this},notify(t){let i=this.notification;const e=t.openurl?t.openurl:this.openurl,o=t.onclick?t.onclick:this.onclick;if(window.Notification){i=t?function(t,i){for(const e in i)t[e]&&(i[e]=t[e]);return i}(t,i):v;const n={};n.icon=t.icon?t.icon:f,n.body=i.body||t.body,t.dir&&(n.dir=t.dir);const s=new Notification(i.title||t.title,n);s.onclick=()=>{o&&"function"==typeof o&&o(s),e&&window.open(e)},s.onshow=()=>{t.onshow&&"function"==typeof t.onshow&&t.onshow(s)},s.onclose=()=>{t.onclose&&"function"==typeof t.onclose&&t.onclose(s)},s.onerror=()=>{t.onerror&&"function"==typeof t.onerror&&t.onerror(s)},this.Notifiy=s}return this},isPermission:()=>window.Notification&&"granted"===Notification.permission,setInterval(t){return t&&(this.interval=t,this.addTimer()),this},setFavicon(t){if(!t&&0!==t)return this.faviconClear();const i=document.getElementById(`new${this.updateFavicon.id}`);return this.favicon&&this.favicon.remove(),i&&i.remove(),this.updateFavicon.num=t,y(t,this.updateFavicon),this},setFaviconColor(t){return t&&(this.faviconRemove(),this.updateFavicon.textColor=t,y(this.updateFavicon.num,this.updateFavicon)),this},setFaviconBackgroundColor(t){return t&&(this.faviconRemove(),this.updateFavicon.backgroundColor=t,y(this.updateFavicon.num,this.updateFavicon)),this},faviconRemove(){this.faviconClear();const t=document.getElementById(`new${this.updateFavicon.id}`);this.favicon&&this.favicon.remove(),t&&t.remove()},addTimer(){return this.clearTimer(),m.indexOf(this.effect)>=0&&(this.timer=setInterval(this.render.bind(this),this.interval)),this},close(){this.Notifiy&&this.Notifiy.close()},faviconClear(){const t=document.getElementById(`new${this.updateFavicon.id}`),i=document.getElementsByTagName("head")[0],e=document.querySelectorAll("link[rel~=shortcut]");if(t&&t.remove(),e.length>0)for(let o=0;o<e.length;o++)e[o].remove();return i.appendChild(this.cloneFavicon),f=this.cloneFavicon.href,this.favicon=this.cloneFavicon,this},clearTimer(){return this.timer&&clearInterval(this.timer),document.title=this.title,this}};const F=d(" 访问 iNotify "),g=d("设置 Favicon"),C=d("设置 Favicon 颜色(白底黑字)"),w=d("清空 Favicon"),k=d("开始滚动标题"),E=d("停止滚动标题"),T=d("打开通知"),N=d("打开通知(点击打开页面)"),_=d("打开通知(设置 icon)"),x=d("打开通知(回调事件)"),A={__name:"notify",setup(l){const d=new b({effect:"scroll",interval:500}),f=t(d.isPermission()),m=t(!1);function v(){d.setFavicon(5).setFaviconColor("#fff").setFaviconBackgroundColor("#2F9A00"),m.value=!0}function p(){d.setFaviconColor("#000").setFaviconBackgroundColor("#fff"),m.value=!0}function y(){d.faviconClear(),m.value=!1}const A=t(!1);function R(){d.setTitle("您有5条通知未处理，请尽快处理噢~"),A.value=!0}function B(){d.setTitle(),A.value=!1}function I(){d.notify({title:"Fantastic-admin",body:"Fantastic-admin 是一款开箱即用的中后台框架"})}function L(){d.notify({title:"温馨提示",body:"用 Fantastic-admin 做开发记得要看开发文档噢，点击我访问开发文档",openurl:"https://hooray.gitee.io/fantastic-admin/"})}function P(){d.notify({title:"温馨提示",body:"icon 默认显示 favicon ，也可以手动设置",icon:"https://picsum.photos/100"})}function $(){d.notify({title:"温馨提示",body:"注意看相关触发事件",onshow:()=>{u("触发 onshow 事件")},onclick:()=>{u("触发 onclick 事件")},onerror:()=>{u("触发 onerror 事件")},onclose:()=>{u("触发 onclose 事件")}})}return(t,l)=>{const d=h,u=i,b=e,j=a,S=c;return r(),o("div",null,[n(j,{title:"通知",content:"基于 iNotify ，支持 favicon、网页标题、Chrome桌面通知"},{default:s((()=>[n(b,{onClick:l[0]||(l[0]=t=>{return i="https://github.com/jaywcjlove/iNotify",void window.open(i,"top");var i})},{icon:s((()=>[n(u,null,{default:s((()=>[n(d,{name:"i-ep:link"})])),_:1})])),default:s((()=>[F])),_:1})])),_:1}),n(S,{title:"Favicon 通知"},{default:s((()=>[n(b,{onClick:v},{default:s((()=>[g])),_:1}),n(b,{onClick:p},{default:s((()=>[C])),_:1}),n(b,{disabled:!m.value,onClick:y},{default:s((()=>[w])),_:1},8,["disabled"])])),_:1}),n(S,{title:"标题通知"},{default:s((()=>[n(b,{onClick:R},{default:s((()=>[k])),_:1}),n(b,{disabled:!A.value,onClick:B},{default:s((()=>[E])),_:1},8,["disabled"])])),_:1}),n(S,{title:"桌面通知（如果按钮被禁用，说明当前环境不支持）"},{default:s((()=>[n(b,{disabled:!f.value,onClick:I},{default:s((()=>[T])),_:1},8,["disabled"]),n(b,{disabled:!f.value,onClick:L},{default:s((()=>[N])),_:1},8,["disabled"]),n(b,{disabled:!f.value,onClick:P},{default:s((()=>[_])),_:1},8,["disabled"]),n(b,{onClick:$},{default:s((()=>[x])),_:1})])),_:1})])}}};"function"==typeof l&&l(A);export{A as default};
