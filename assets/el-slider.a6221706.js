
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{E as e}from"./el-input-number.8ff5d518.js";import{a9 as a,aw as t,aO as l,cH as i,aN as n,bX as o,r,o as s,a as u,aD as d,c as m,aS as v,s as p,W as c,y as g,c6 as f,al as b,t as y,a_ as h,d as V,u as w,as as x,aL as S,b as k,f as B,h as C,w as E,J as L,R as T,i as z,n as M,a7 as N,k as P,_ as D,aB as I,au as X,b6 as F,aT as Y,aU as _,H as A,e as U,m as W,S as j,X as K,q as R}from"./index.252503d3.js";import{U as $,I as O,C as H}from"./event.d298a7ab.js";const q=Symbol("sliderContextKey"),J=a({modelValue:{type:t([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:l,inputSize:l,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:t(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:t(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:i,default:"top"},marks:{type:t(Object)},validateEvent:{type:Boolean,default:!0}}),G=e=>n(e)||o(e)&&e.every(n),Q={[$]:G,[O]:G,[H]:G},Z=(e,a,t)=>{const{form:l,formItem:i}=v(),n=p(),o=r(),s=r(),u={firstButton:o,secondButton:s},c=m((()=>e.disabled||(null==l?void 0:l.disabled)||!1)),g=m((()=>Math.min(a.firstValue,a.secondValue))),f=m((()=>Math.max(a.firstValue,a.secondValue))),b=m((()=>e.range?100*(f.value-g.value)/(e.max-e.min)+"%":100*(a.firstValue-e.min)/(e.max-e.min)+"%")),y=m((()=>e.range?100*(g.value-e.min)/(e.max-e.min)+"%":"0%")),h=m((()=>e.vertical?{height:e.height}:{})),V=m((()=>e.vertical?{height:b.value,bottom:y.value}:{width:b.value,left:y.value})),w=()=>{n.value&&(a.sliderSize=n.value["client"+(e.vertical?"Height":"Width")])},x=t=>{const l=(t=>{const l=e.min+t*(e.max-e.min)/100;if(!e.range)return o;let i;return i=Math.abs(g.value-l)<Math.abs(f.value-l)?a.firstValue<a.secondValue?"firstButton":"secondButton":a.firstValue>a.secondValue?"firstButton":"secondButton",u[i]})(t);return l.value.setPosition(t),l},S=e=>{t($,e),t(O,e)},k=async()=>{await d(),t(H,e.range?[g.value,f.value]:e.modelValue)},B=t=>{var l,i,o,r,s,u;if(c.value||a.dragging)return;w();let d=0;if(e.vertical){const e=null!=(o=null==(i=null==(l=t.touches)?void 0:l.item(0))?void 0:i.clientY)?o:t.clientY;d=(n.value.getBoundingClientRect().bottom-e)/a.sliderSize*100}else{d=((null!=(u=null==(s=null==(r=t.touches)?void 0:r.item(0))?void 0:s.clientX)?u:t.clientX)-n.value.getBoundingClientRect().left)/a.sliderSize*100}return d<0||d>100?void 0:x(d)};return{elFormItem:i,slider:n,firstButton:o,secondButton:s,sliderDisabled:c,minValue:g,maxValue:f,runwayStyle:h,barStyle:V,resetSize:w,setPosition:x,emitChange:k,onSliderWrapperPrevent:e=>{var a,t;((null==(a=u.firstButton.value)?void 0:a.dragging)||(null==(t=u.secondButton.value)?void 0:t.dragging))&&e.preventDefault()},onSliderClick:e=>{B(e)&&k()},onSliderDown:async e=>{const a=B(e);a&&(await d(),a.value.onButtonDown(e))},setFirstValue:t=>{a.firstValue=t,S(e.range?[g.value,f.value]:t)},setSecondValue:t=>{a.secondValue=t,e.range&&S([g.value,f.value])}}},{left:ee,down:ae,right:te,up:le,home:ie,end:ne,pageUp:oe,pageDown:re}=b,se=(e,a,t)=>{const{disabled:l,min:i,max:n,step:o,showTooltip:s,precision:u,sliderSize:v,formatTooltip:p,emitChange:b,resetSize:y,updateDragging:h}=c(q),{tooltip:V,tooltipVisible:w,formatValue:x,displayTooltip:S,hideTooltip:k}=((e,a,t)=>{const l=r(),i=r(!1),n=m((()=>a.value instanceof Function)),o=m((()=>n.value&&a.value(e.modelValue)||e.modelValue)),s=f((()=>{t.value&&(i.value=!0)}),50),u=f((()=>{t.value&&(i.value=!1)}),50);return{tooltip:l,tooltipVisible:i,formatValue:o,displayTooltip:s,hideTooltip:u}})(e,p,s),B=r(),C=m((()=>(e.modelValue-i.value)/(n.value-i.value)*100+"%")),E=m((()=>e.vertical?{bottom:C.value}:{left:C.value})),L=e=>{l.value||(a.newPosition=Number.parseFloat(C.value)+e/(n.value-i.value)*100,P(a.newPosition),b())},T=e=>{let a,t;return e.type.startsWith("touch")?(t=e.touches[0].clientY,a=e.touches[0].clientX):(t=e.clientY,a=e.clientX),{clientX:a,clientY:t}},z=t=>{a.dragging=!0,a.isClick=!0;const{clientX:l,clientY:i}=T(t);e.vertical?a.startY=i:a.startX=l,a.startPosition=Number.parseFloat(C.value),a.newPosition=a.startPosition},M=t=>{if(a.dragging){let l;a.isClick=!1,S(),y();const{clientX:i,clientY:n}=T(t);e.vertical?(a.currentY=n,l=(a.startY-a.currentY)/v.value*100):(a.currentX=i,l=(a.currentX-a.startX)/v.value*100),a.newPosition=a.startPosition+l,P(a.newPosition)}},N=()=>{a.dragging&&(setTimeout((()=>{a.dragging=!1,a.hovering||k(),a.isClick||(P(a.newPosition),b())}),0),window.removeEventListener("mousemove",M),window.removeEventListener("touchmove",M),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N),window.removeEventListener("contextmenu",N))},P=async l=>{if(null===l||Number.isNaN(+l))return;l<0?l=0:l>100&&(l=100);const r=100/((n.value-i.value)/o.value);let s=Math.round(l/r)*r*(n.value-i.value)*.01+i.value;s=Number.parseFloat(s.toFixed(u.value)),s!==e.modelValue&&t($,s),a.dragging||e.modelValue===a.oldValue||(a.oldValue=e.modelValue),await d(),a.dragging&&S(),V.value.updatePopper()};return g((()=>a.dragging),(e=>{h(e)})),{disabled:l,button:B,tooltip:V,tooltipVisible:w,showTooltip:s,wrapperStyle:E,formatValue:x,handleMouseEnter:()=>{a.hovering=!0,S()},handleMouseLeave:()=>{a.hovering=!1,a.dragging||k()},onButtonDown:e=>{l.value||(e.preventDefault(),z(e),window.addEventListener("mousemove",M),window.addEventListener("touchmove",M),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),window.addEventListener("contextmenu",N),B.value.focus())},onKeyDown:e=>{let a=!0;[ee,ae].includes(e.key)?L(-o.value):[te,le].includes(e.key)?L(o.value):e.key===ie?l.value||(P(0),b()):e.key===ne?l.value||(P(100),b()):e.key===re?L(4*-o.value):e.key===oe?L(4*o.value):a=!1,a&&e.preventDefault()},setPosition:P}},ue=a({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:i,default:"top"}}),de=["tabindex"];var me=D(V({name:"ElSliderButton",props:ue,emits:{[$]:e=>n(e)},setup(e,{expose:a,emit:t}){const l=e,i=w("slider"),n=x({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:l.modelValue}),{disabled:o,button:r,tooltip:s,showTooltip:u,tooltipVisible:d,wrapperStyle:m,formatValue:v,handleMouseEnter:p,handleMouseLeave:c,onButtonDown:g,onKeyDown:f,setPosition:b}=se(l,n,t),{hovering:y,dragging:h}=S(n);return a({onButtonDown:g,onKeyDown:f,setPosition:b,hovering:y,dragging:h}),(e,a)=>(k(),B("div",{ref_key:"button",ref:r,class:M([z(i).e("button-wrapper"),{hover:z(y),dragging:z(h)}]),style:P(z(m)),tabindex:z(o)?-1:0,onMouseenter:a[0]||(a[0]=(...e)=>z(p)&&z(p)(...e)),onMouseleave:a[1]||(a[1]=(...e)=>z(c)&&z(c)(...e)),onMousedown:a[2]||(a[2]=(...e)=>z(g)&&z(g)(...e)),onTouchstart:a[3]||(a[3]=(...e)=>z(g)&&z(g)(...e)),onFocus:a[4]||(a[4]=(...e)=>z(p)&&z(p)(...e)),onBlur:a[5]||(a[5]=(...e)=>z(c)&&z(c)(...e)),onKeydown:a[6]||(a[6]=(...e)=>z(f)&&z(f)(...e))},[C(z(N),{ref_key:"tooltip",ref:s,visible:z(d),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!z(u),persistent:""},{content:E((()=>[L("span",null,T(z(v)),1)])),default:E((()=>[L("div",{class:M([z(i).e("button"),{hover:z(y),dragging:z(h)}])},null,2)])),_:1},8,["visible","placement","popper-class","disabled"])],46,de))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);var ve=V({name:"ElSliderMarker",props:a({mark:{type:t([String,Object]),default:void 0}}),setup(e){const a=w("slider"),t=m((()=>I(e.mark)?e.mark:e.mark.label)),l=m((()=>I(e.mark)?void 0:e.mark.style));return()=>X("div",{class:a.e("marks-text"),style:l.value},t.value)}});const pe=["id","role","aria-label","aria-labelledby"],ce={key:1};const ge=R(D(V({name:"ElSlider",props:J,emits:Q,setup(a,{expose:t,emit:l}){const i=a,n=w("slider"),{t:o}=F(),v=x({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:p,slider:c,firstButton:f,secondButton:b,sliderDisabled:V,minValue:E,maxValue:T,runwayStyle:N,barStyle:D,resetSize:I,emitChange:X,onSliderWrapperPrevent:R,onSliderClick:H,onSliderDown:J,setFirstValue:G,setSecondValue:Q}=Z(i,v,l),{stops:ee,getStopStyle:ae}=((e,a,t,l)=>({stops:m((()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const i=(e.max-e.min)/e.step,n=100*e.step/(e.max-e.min),o=Array.from({length:i-1}).map(((e,a)=>(a+1)*n));return e.range?o.filter((a=>a<100*(t.value-e.min)/(e.max-e.min)||a>100*(l.value-e.min)/(e.max-e.min))):o.filter((t=>t>100*(a.firstValue-e.min)/(e.max-e.min)))})),getStopStyle:a=>e.vertical?{bottom:`${a}%`}:{left:`${a}%`}}))(i,v,E,T),{inputId:te,isLabeledByFormItem:le}=Y(i,{formItemContext:p}),ie=_(),ne=m((()=>i.inputSize||ie.value)),oe=m((()=>i.label||o("el.slider.defaultLabel",{min:i.min,max:i.max}))),re=m((()=>i.range?i.rangeStartLabel||o("el.slider.defaultRangeStartLabel"):oe.value)),se=m((()=>i.formatValueText?i.formatValueText(he.value):`${he.value}`)),ue=m((()=>i.rangeEndLabel||o("el.slider.defaultRangeEndLabel"))),de=m((()=>i.formatValueText?i.formatValueText(Ve.value):`${Ve.value}`)),ge=m((()=>[n.b(),n.m(ie.value),n.is("vertical",i.vertical),{[n.m("with-input")]:i.showInput}])),fe=(e=>m((()=>e.marks?Object.keys(e.marks).map(parseFloat).sort(((e,a)=>e-a)).filter((a=>a<=e.max&&a>=e.min)).map((a=>({point:a,position:100*(a-e.min)/(e.max-e.min),mark:e.marks[a]}))):[])))(i);((e,a,t,l,i,n)=>{const o=e=>{i($,e),i(O,e)},r=()=>e.range?![t.value,l.value].every(((e,t)=>e===a.oldValue[t])):e.modelValue!==a.oldValue,s=()=>{var t,l;if(e.min>e.max)return void y("Slider","min should not be greater than max.");const i=e.modelValue;e.range&&Array.isArray(i)?i[1]<e.min?o([e.min,e.min]):i[0]>e.max?o([e.max,e.max]):i[0]<e.min?o([e.min,i[1]]):i[1]>e.max?o([i[0],e.max]):(a.firstValue=i[0],a.secondValue=i[1],r()&&(e.validateEvent&&(null==(t=null==n?void 0:n.validate)||t.call(n,"change").catch((e=>h()))),a.oldValue=i.slice())):e.range||"number"!=typeof i||Number.isNaN(i)||(i<e.min?o(e.min):i>e.max?o(e.max):(a.firstValue=i,r()&&(e.validateEvent&&(null==(l=null==n?void 0:n.validate)||l.call(n,"change").catch((e=>h()))),a.oldValue=i)))};s(),g((()=>a.dragging),(e=>{e||s()})),g((()=>e.modelValue),((e,t)=>{a.dragging||Array.isArray(e)&&Array.isArray(t)&&e.every(((e,a)=>e===t[a]))&&a.firstValue===e[0]&&a.secondValue===e[1]||s()}),{deep:!0}),g((()=>[e.min,e.max]),(()=>{s()}))})(i,v,E,T,l,p);const be=m((()=>{const e=[i.min,i.max,i.step].map((e=>{const a=`${e}`.split(".")[1];return a?a.length:0}));return Math.max.apply(null,e)})),{sliderWrapper:ye}=((e,a,t)=>{const l=r();return s((async()=>{e.range?(Array.isArray(e.modelValue)?(a.firstValue=Math.max(e.min,e.modelValue[0]),a.secondValue=Math.min(e.max,e.modelValue[1])):(a.firstValue=e.min,a.secondValue=e.max),a.oldValue=[a.firstValue,a.secondValue]):("number"!=typeof e.modelValue||Number.isNaN(e.modelValue)?a.firstValue=e.min:a.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),a.oldValue=a.firstValue),u(window,"resize",t),await d(),t()})),{sliderWrapper:l}})(i,v,I),{firstValue:he,secondValue:Ve,sliderSize:we}=S(v);return A(q,{...S(i),sliderSize:we,disabled:V,precision:be,emitChange:X,resetSize:I,updateDragging:e=>{v.dragging=e}}),t({onSliderClick:H}),(a,t)=>{var l,i;return k(),B("div",{id:a.range?z(te):void 0,ref_key:"sliderWrapper",ref:ye,class:M(z(ge)),role:a.range?"group":void 0,"aria-label":a.range&&!z(le)?z(oe):void 0,"aria-labelledby":a.range&&z(le)?null==(l=z(p))?void 0:l.labelId:void 0,onTouchstart:t[2]||(t[2]=(...e)=>z(R)&&z(R)(...e)),onTouchmove:t[3]||(t[3]=(...e)=>z(R)&&z(R)(...e))},[L("div",{ref_key:"slider",ref:c,class:M([z(n).e("runway"),{"show-input":a.showInput&&!a.range},z(n).is("disabled",z(V))]),style:P(z(N)),onMousedown:t[0]||(t[0]=(...e)=>z(J)&&z(J)(...e)),onTouchstart:t[1]||(t[1]=(...e)=>z(J)&&z(J)(...e))},[L("div",{class:M(z(n).e("bar")),style:P(z(D))},null,6),C(me,{id:a.range?void 0:z(te),ref_key:"firstButton",ref:f,"model-value":z(he),vertical:a.vertical,"tooltip-class":a.tooltipClass,placement:a.placement,role:"slider","aria-label":a.range||!z(le)?z(re):void 0,"aria-labelledby":!a.range&&z(le)?null==(i=z(p))?void 0:i.labelId:void 0,"aria-valuemin":a.min,"aria-valuemax":a.range?z(Ve):a.max,"aria-valuenow":z(he),"aria-valuetext":z(se),"aria-orientation":a.vertical?"vertical":"horizontal","aria-disabled":z(V),"onUpdate:modelValue":z(G)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),a.range?(k(),U(me,{key:0,ref_key:"secondButton",ref:b,"model-value":z(Ve),vertical:a.vertical,"tooltip-class":a.tooltipClass,placement:a.placement,role:"slider","aria-label":z(ue),"aria-valuemin":z(he),"aria-valuemax":a.max,"aria-valuenow":z(Ve),"aria-valuetext":z(de),"aria-orientation":a.vertical?"vertical":"horizontal","aria-disabled":z(V),"onUpdate:modelValue":z(Q)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):W("v-if",!0),a.showStops?(k(),B("div",ce,[(k(!0),B(j,null,K(z(ee),((e,a)=>(k(),B("div",{key:a,class:M(z(n).e("stop")),style:P(z(ae)(e))},null,6)))),128))])):W("v-if",!0),z(fe).length>0?(k(),B(j,{key:2},[L("div",null,[(k(!0),B(j,null,K(z(fe),((e,a)=>(k(),B("div",{key:a,style:P(z(ae)(e.position)),class:M([z(n).e("stop"),z(n).e("marks-stop")])},null,6)))),128))]),L("div",{class:M(z(n).e("marks"))},[(k(!0),B(j,null,K(z(fe),((e,a)=>(k(),U(z(ve),{key:a,mark:e.mark,style:P(z(ae)(e.position))},null,8,["mark","style"])))),128))],2)],64)):W("v-if",!0)],38),a.showInput&&!a.range?(k(),U(z(e),{key:0,ref:"input","model-value":z(he),class:M(z(n).e("input")),step:a.step,disabled:z(V),controls:a.showInputControls,min:a.min,max:a.max,debounce:a.debounce,size:z(ne),"onUpdate:modelValue":z(G),onChange:z(X)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):W("v-if",!0)],42,pe)}}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]));export{ge as E};
