
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{a9 as r,aw as i,a$ as u,ac as p,ad as c,az as d,d as g,aO as v,aM as f,u as m,r as h,c as b,cC as y,cb as w,cx as $,o as x,b as A,e as k,w as S,D as _,h as O,i as j,f as C,E as M,n as F,ba as E,W as B,g as P,a1 as V,Q as I,R as K,cd as R,k as T,a6 as U,ae as W,a0 as z,l as L,bh as q,a4 as D,_ as N,aA as H,bO as G,t as Q,q as J,z as X,P as Y,bG as Z,c5 as ee,m as ae}from"./index.9bf5deda.js";/* empty css                 *//* empty css                     */import{E as te}from"./index2.2043e11a.js";import{U as le,I as se,C as oe}from"./event2.c09267d7.js";const ne=r({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:i(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:i([Function,Array]),default:u},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:p.teleported,highlightFirstItem:{type:Boolean,default:!1}}),re={[le]:e=>c(e),[se]:e=>c(e),[oe]:e=>c(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>d(e)},ie=["aria-expanded","aria-owns"],ue={key:0},pe=["id","aria-selected","onClick"],ce=g((de=((e,a)=>{for(var t in a||(a={}))s.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&n(e,t,a[t]);return e})({},{name:"ElAutocomplete",inheritAttrs:!1}),a(de,t({props:ne,emits:re,setup(e,{expose:a,emit:t}){const l=e,s=v(),o=f(),n=m("autocomplete"),r=h(),i=h(),u=h(),p=h();let c=!1;const d=h([]),g=h(-1),N=h(""),J=h(!1),X=h(!1),Y=h(!1),Z=b((()=>n.b(String(y())))),ee=b((()=>o.style)),ae=b((()=>(d.value.length>0||Y.value)&&J.value)),ne=b((()=>!l.hideLoading&&Y.value)),re=async()=>{await H(),ae.value&&(N.value=`${r.value.$el.offsetWidth}px`)},ce=w((async e=>{if(X.value)return;const a=e=>{Y.value=!1,X.value||(G(e)?(d.value=e,g.value=l.highlightFirstItem?0:-1):Q("ElAutocomplete","autocomplete suggestions must be an array"))};if(Y.value=!0,G(l.fetchSuggestions))a(l.fetchSuggestions);else{const t=await l.fetchSuggestions(e,a);G(t)&&a(t)}}),l.debounce),de=e=>{const a=!!e;if(t(se,e),t(le,e),X.value=!1,J.value||(J.value=c&&a),!l.triggerOnFocus&&!e)return X.value=!0,void(d.value=[]);c&&a&&(c=!1),ce(e)},ge=e=>{t(oe,e)},ve=e=>{J.value=!0,t("focus",e),l.triggerOnFocus&&ce(String(l.modelValue))},fe=e=>{t("blur",e)},me=()=>{J.value=!1,c=!0,t(le,""),t("clear")},he=async()=>{ae.value&&g.value>=0&&g.value<d.value.length?we(d.value[g.value]):l.selectWhenUnmatched&&(t("select",{value:l.modelValue}),await H(),d.value=[],g.value=-1)},be=e=>{ae.value&&(e.preventDefault(),e.stopPropagation(),ye())},ye=()=>{J.value=!1},we=async e=>{t(se,e[l.valueKey]),t(le,e[l.valueKey]),t("select",e),await H(),d.value=[],g.value=-1},$e=e=>{if(!ae.value||Y.value)return;if(e<0)return void(g.value=-1);e>=d.value.length&&(e=d.value.length-1);const a=i.value.querySelector(`.${n.be("suggestion","wrap")}`),t=a.querySelectorAll(`.${n.be("suggestion","list")} li`)[e],l=a.scrollTop,{offsetTop:s,scrollHeight:o}=t;s+o>l+a.clientHeight&&(a.scrollTop+=o),s<l&&(a.scrollTop-=o),g.value=e,r.value.ref.setAttribute("aria-activedescendant",`${Z.value}-item-${g.value}`)};return $(p,ye),x((()=>{r.value.ref.setAttribute("role","textbox"),r.value.ref.setAttribute("aria-autocomplete","list"),r.value.ref.setAttribute("aria-controls","id"),r.value.ref.setAttribute("aria-activedescendant",`${Z.value}-item-${g.value}`)})),a({highlightedIndex:g,activated:J,loading:Y,inputRef:r,popperRef:u,suggestions:d,handleSelect:we,handleKeyEnter:he,focus:()=>{var e;null==(e=r.value)||e.focus()},close:ye,highlight:$e}),(e,a)=>(A(),k(j(D),{ref_key:"popperRef",ref:u,visible:j(ae),"onUpdate:visible":a[2]||(a[2]=e=>q(ae)?ae.value=e:null),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[j(n).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${j(n).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:re},{content:S((()=>[_("div",{ref_key:"regionRef",ref:i,class:F([j(n).b("suggestion"),j(n).is("loading",j(ne))]),style:T({minWidth:N.value,outline:"none"}),role:"region"},[O(j(R),{id:j(Z),tag:"ul","wrap-class":j(n).be("suggestion","wrap"),"view-class":j(n).be("suggestion","list"),role:"listbox"},{default:S((()=>[j(ne)?(A(),C("li",ue,[O(j(M),{class:F(j(n).is("loading"))},{default:S((()=>[O(j(E))])),_:1},8,["class"])])):(A(!0),C(K,{key:1},B(d.value,((a,t)=>(A(),C("li",{id:`${j(Z)}-item-${t}`,key:t,class:F({highlighted:g.value===t}),role:"option","aria-selected":g.value===t,onClick:e=>we(a)},[P(e.$slots,"default",{item:a},(()=>[V(I(a[e.valueKey]),1)]))],10,pe)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:S((()=>[_("div",{ref_key:"listboxRef",ref:p,class:F([j(n).b(),e.$attrs.class]),style:T(j(ee)),role:"combobox","aria-haspopup":"listbox","aria-expanded":j(ae),"aria-owns":j(Z)},[O(j(te),W({ref_key:"inputRef",ref:r},j(s),{"model-value":e.modelValue,onInput:de,onChange:ge,onFocus:ve,onBlur:fe,onClear:me,onKeydown:[a[0]||(a[0]=z(L((e=>$e(g.value-1)),["prevent"]),["up"])),a[1]||(a[1]=z(L((e=>$e(g.value+1)),["prevent"]),["down"])),z(he,["enter"]),z(ye,["tab"]),z(be,["esc"])]}),U({_:2},[e.$slots.prepend?{name:"prepend",fn:S((()=>[P(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:S((()=>[P(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:S((()=>[P(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:S((()=>[P(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,ie)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}}))));var de;const ge=J(N(ce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));const ve={class:"map"},fe={class:"search-name"},me=["title"],he=g({name:"AmapMarker"});var be=X(Object.assign(he,{props:{v:{type:String,default:"1.4.15"},appkey:{type:String,default:""},height:{type:[Number,String],default:500},lnglat:{type:Array,default:()=>[]}},emits:["update:lnglat"],setup(e,{emit:a}){const t=e,l=h("");let s="",o="",n="";const r=b((()=>"string"==typeof t.height?t.height:`${t.height}px`));function i(){s=new AMap.Map("amap",{zoom:12}),AMap.plugin("AMap.ToolBar",(()=>{let e=new AMap.ToolBar;s.addControl(e)})),o=new AMap.Marker({draggable:!0,cursor:"move"}),o.on("dragend",(e=>{a("update:lnglat",[e.lnglat.lng,e.lnglat.lat])})),n=new AMap.Autocomplete,s.on("click",(e=>{u(e.lnglat.getLng(),e.lnglat.getLat())})),2==t.lnglat.length&&u(t.lnglat[0],t.lnglat[1])}function u(e,t){s.remove(o),o.setPosition([e,t]),s.add(o),s.setFitView(),a("update:lnglat",[e,t])}function p(e,a){n.search(e,((e,t)=>{a(t.tips)}))}function c(e){l.value=e.name,e.location?u(e.location.lng,e.location.lat):s.setCity(e.adcode)}return x((()=>{if("undefined"==typeof AMap){let e=document.createElement("script");e.charset="UTF-8",e.src=`https://webapi.amap.com/maps?v=${t.v}&key=${t.appkey}&plugin=AMap.Autocomplete`,document.head.appendChild(e),e.onload=()=>{i()}}else H((()=>{i()}))})),(e,a)=>{const t=Y,s=M,o=ge;return A(),C("div",ve,[O(o,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),class:"search","fetch-suggestions":p,"trigger-on-focus":!1,clearable:"",placeholder:"请输入地址关键字",onSelect:c},{prefix:S((()=>[O(s,{class:"el-input__icon"},{default:S((()=>[O(t,{name:"i-ep:location-information"})])),_:1})])),default:S((({item:e})=>[_("div",fe,I(e.name),1),_("span",{class:"search-address",title:e.district+e.address},I(e.district+e.address),9,me)])),_:1},8,["modelValue"]),_("div",{id:"amap",style:T(`height:${j(r)};`)},null,4)])}}}),[["__scopeId","data-v-63cdee0a"]]);const ye={name:"ComponentExampleAmap",props:{},data:()=>({lnglat:[120.068384,30.290939]}),created(){},mounted(){},methods:{}};"function"==typeof Z&&Z(ye);var we=X(ye,[["render",function(e,a,t,l,s,o){const n=be,r=ee;return A(),C("div",null,[O(r,null,{default:S((()=>[_("div",null,"经纬度："+I(s.lnglat),1),ae(" 注意这里替换高德地图的appkey "),O(n,{lnglat:s.lnglat,"onUpdate:lnglat":a[0]||(a[0]=e=>s.lnglat=e),appkey:"8f7844cc502e17bb549c04c9aaadaf94",height:600},null,8,["lnglat"])])),_:1})])}]]);export{we as default};
